<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Rspress v1.11.2"><title data-rh="true">ffmpeg 是一个命令行音视频后期处理软件 - 知否知否</title><meta data-rh="true" name="description" content="知否 Blog"/><meta data-rh="true" name="referrer" content="no-referrer-when-downgrade"/>
<script id="check-dark-light">
;(() => {
  const saved = localStorage.getItem('rspress-theme-appearance')
  const prefereDark = window.matchMedia('(prefers-color-scheme: dark)').matches
  if (!saved || saved === 'auto' ? prefereDark : saved === 'dark') {
    document.documentElement.classList.add('dark')
  }
})()
</script>
<title>知否知否</title><link rel="icon" href="/favicon.ico"><script defer="defer" src="/static/js/lib-lodash.4cfcb11a.js"></script><script defer="defer" src="/static/js/lib-polyfill.348ddd3c.js"></script><script defer="defer" src="/static/js/lib-react.488da7dd.js"></script><script defer="defer" src="/static/js/lib-router.8a2efe16.js"></script><script defer="defer" src="/static/js/73.2c31834e.js"></script><script defer="defer" src="/static/js/index.74af9ed8.js"></script><link href="/static/css/73.e7f0d4f2.css" rel="stylesheet"><link href="/static/css/index.652aa3d1.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" rel="stylesheet" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous"></head><body ><div id="root"><div><div><div class="navContainer_f6cde sticky rspress-nav px-6 "><div class="container_f6cde flex justify-between items-center h-full"><div class="navBarTitle_f6cde"><a href="/" class="flex items-center w-full h-full text-base font-semibold transition-opacity duration-300 hover:opacity-60"><span>知否知否</span></a></div><div class="undefined flex flex-1 justify-end items-center"><div class="rightNav_f6cde"><div class="flex sm:flex-1 items-center sm:pl-4 sm:pr-2"><div class="rspress-nav-search-button navSearchButton_6e282"><button><svg width="18" height="24" viewBox="0 0 32 32" hight="18"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg><p class="searchWord_6e282">搜索...</p><div style="opacity:0"><span></span><span>K</span></div></button></div><div class="mobileNavSearchButton_6e282"><svg width="24" height="24" viewBox="0 0 32 32"><path fill="var(--rp-c-gray)" d="m29 27.586-7.552-7.552a11.018 11.018 0 1 0-1.414 1.414L27.586 29ZM4 13a9 9 0 1 1 9 9 9.01 9.01 0 0 1-9-9Z"></path></svg></div></div><div class="rspress-nav-menu menu h-14"><a class="link_03735  cursor-pointer" target="" href="/guide/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">未来指引</div></a><a class="link_03735  cursor-pointer" target="" href="/blog/flinks/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">友情链接</div></a><a class="link_03735  cursor-pointer" target="" href="/blog/archives/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">归档</div></a><a class="link_03735  cursor-pointer" target="" href="/blog/categories/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">分类</div></a><a class="link_03735  cursor-pointer" target="" href="/blog/tags/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">标签</div></a><a class="link_03735  cursor-pointer" target="" href="/about/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">关于我</div></a></div><div class="flex-center flex-row"><div class="mx-2"><div class="md:mr-2 rspress-nav-appearance"><div class="p-1 border border-solid border-gray-300 text-gray-400  cursor-pointer rounded-md hover:border-gray-600 hover:text-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200 transition-all duration-300"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M12 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zM12 4c-.6 0-1-.4-1-1V1c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM12 24c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1s1 .4 1 1v2c0 .6-.4 1-1 1zM5.6 6.6c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.1.2-.4.3-.7.3zM19.8 20.8c-.3 0-.5-.1-.7-.3l-1.4-1.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l1.4 1.4c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3zM3 13H1c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM23 13h-2c-.6 0-1-.4-1-1s.4-1 1-1h2c.6 0 1 .4 1 1s-.4 1-1 1zM4.2 20.8c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.4.3-.7.3zM18.4 6.6c-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4l1.4-1.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-1.4 1.4c-.2.2-.5.3-.7.3z"></path></svg></div></div></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/zhifou/" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></div></a></div></div></div></div><div class="mobileNavMenu_f6cde"><div class="navScreen_457e8 " id="navScreen"><div class="container_457e8"><div class="navMenu_457e8"><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/guide/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">未来指引</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/flinks/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">友情链接</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/archives/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">归档</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/categories/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">分类</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/blog/tags/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">标签</div></a></div><div class="navMenuItem_457e8 w-full"><a class="link_03735  cursor-pointer" target="" href="/about/index.html"><div class="rspress-nav-menu-item singleItem_f6cde  text-sm font-medium mx-1.5 px-3 py-2 flex items-center">关于我</div></a></div></div><div class="flex-center flex-col gap-2"><div class="mt-2 navAppearance_457e8 flex justify-center"></div><div class="social-links menu-item_93d67 flex-center relative"><div class="flex-center h-full gap-x-4 transition-colors duration-300 md:mr-2"><a href="https://github.com/zhifou/" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></div></a><a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="social-links"><div class="social-links-icon_93d67"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></div></a></div></div></div></div></div><button class=" navHamburger_e7b06 text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"><circle cx="8" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="24" cy="16" r="2" fill="currentColor"></circle></svg></button></div></div></div></div><section><div class="docLayout_edeb4 pt-0"><div class="content_edeb4 rspress-doc-container flex flex-shrink-0 mx-auto"><div class="w-full"><div><div class="rspress-doc"><!--$--><h2 id="ffmpeg-是一个命令行音视频后期处理软件" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#ffmpeg-是一个命令行音视频后期处理软件">#</a>ffmpeg 是一个命令行音视频后期处理软件</h2>
<h4 id="参数列表" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数列表">#</a>参数列表</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-<strong class="font-semibold">i</strong> <strong class="font-semibold">input</strong>_file：指定输入文件的路径和名称。示例：-<strong class="font-semibold">i</strong> <strong class="font-semibold">input</strong>.mp4</li>
<li class="[&amp;:not(:first-child)]:mt-2">-ss position：指定从输入文件的哪个时间位置开始处理，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-ss 00:01:30.500 表示从 1 分 30.5 秒开始处理。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-t duration：指定处理的持续时间，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-t 00:00:45 表示处理 45 秒的内容。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-vf filtergraph：指定视频过滤器图形，用于对视频进行各种处理，如调整大小、裁剪、旋转、滤镜等。示例：-vf &quot;scale=640:480&quot; 表示将视频调整为 640x480 的大小。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-af filtergraph：指定音频过滤器图形，用于对音频进行各种处理，如音频增益、降噪、混音等。示例：-af &quot;volume=2.0&quot; 表示将音频增益调整为原来的 2 倍。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-c:v codec：指定视频编解码器。示例：-c:v libx264 表示使用 libx264 编码器进行视频编码。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-c:a codec：指定音频编解码器。示例：-c:a aac 表示使用 AAC 编码器进行音频编码。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-b:v bitrate：指定视频的比特率，即视频的质量。较高的比特率通常意味着更好的视频质量，但文件大小也会增加。示例：-b:v 1000k 表示视频比特率为 1000kbps。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-b:a bitrate：指定音频的比特率，即音频的质量。较高的比特率通常意味着更好的音频质量，但文件大小也会增加。示例：-b:a 128k 表示音频比特率为 128kbps。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-r framerate：指定视频的帧率，即每秒播放的画面数量。较高的帧率可以获得更流畅的视频，但也会增加文件大小。示例：-r 30 表示视频帧率为 30 帧每秒。</li>
<li class="[&amp;:not(:first-child)]:mt-2">-y 不询问直接覆盖原有的同名文件</li>
</ul>
<h2 id="1-裁剪命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#1-裁剪命令">#</a>1. 裁剪命令</h2>
<h4 id="参数说明" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-i  input_file：指定输入文件的路径和名称。示例：-i  input.mp3</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-ss position：指定从输入文件的哪个时间位置开始处理，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-ss 00:01:30.500 表示从 1 分 30.5 秒开始处理。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-t duration：指定处理的持续时间，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-t 00:00:45 表示处理 45 秒的内容。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-to 终止点时间</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-c copy 表示不改变音频和视频的编码格式，直接拷贝，提升效率</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">output.mp3 为处理结果文件</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp3 -ss 00:00:xx -t </span><span class="token number">120</span><span> -y output.mp3
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp3 -ss </span><span class="token number">10</span><span> -t </span><span class="token number">230</span><span> output.mp3
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i test.mp3 -ss 00:01:30 -to 00:02:30 -c copy test_cut.mp3
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 截取视频片段</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -ss 04:10 -t </span><span class="token number">16</span><span> -c copy -avoid_negative_ts make_zero output.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
</ul>
<h2 id="2-合成命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#2-合成命令">#</a>2. 合成命令</h2>
<h3 id="21-混合合成" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#21-混合合成">#</a>2.1 混合合成</h3>
<h4 id="参数说明-1" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-1">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-i 文件 1.mp3 和 2.mp3 为待合成的两个源文件</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-filter_complex 过滤器参数</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">amix=inputs 配置输入的整体样本数</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">duration，first：长度取决于第一个文件，longest：长度取决于时间最长文件，shortest：长度取决于时间最短文件</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">dropout_transition：输入流结束时用于体积重新规范化的过渡时间</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-f mp3 设置导出文件格式</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token number">1</span><span>.mp3 -i </span><span class="token number">2</span><span>.mp3 -filter_complex </span><span class="token assign-left" style="color:var(--code-token-variable)">amix</span><span class="token operator">=</span><span>inputs</span><span class="token operator">=</span><span class="token number">2</span><span>:duration</span><span class="token operator">=</span><span>first:dropout_transition</span><span class="token operator">=</span><span class="token number">2</span><span> -f mp3 remix.mp3</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
</ul>
<h3 id="22-连接合成" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#22-连接合成">#</a>2.2 连接合成</h3>
<h4 id="参数说明-2" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-2">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">concat 合并文件指令</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;concat:Box01.mp3|Box02.mp3&quot;</span><span> Box.mp3
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;concat:headerNew.mp3|006.mp3&quot;</span><span> -acodec copy demo6.mp3</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">使用txt文件集合concat合并，视频合并使用这个list合并方式</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 将两个 flv 文件合并</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -f concat -i videolist.txt -c copy output.flv
</span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f concat -safe </span><span class="token number">0</span><span> -i list.txt -c copy output-he.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)">## input.txt 中的内容</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-function)">file</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;xj1.flv&#x27;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-function)">file</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;xj2.flv&#x27;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
</ul>
<h3 id="23-淡出效果" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#23-淡出效果">#</a>2.3 淡出效果</h3>
<h4 id="参数说明-3" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-3">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">afade 淡入淡出指令</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">从 st 秒开始，经过 d 秒钟的淡出效果</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i bgm3.mp3  -filter_complex </span><span class="token assign-left" style="color:var(--code-token-variable)">afade</span><span class="token operator">=</span><span>t</span><span class="token operator">=</span><span>out:st</span><span class="token operator">=</span><span class="token number">16</span><span>:d</span><span class="token operator">=</span><span class="token number">4</span><span> bgm31.mp3</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
</ul>
<h3 id="24-合并音频" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#24-合并音频">#</a>2.4 合并音频</h3>
<h4 id="参数说明-4" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-4">#</a>参数说明</h4>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i output.mp3 -i output_dvolume.mp3 -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;[0:a][1:a]concat=n=2:v=0:a=1[out]&quot;</span><span> -map </span><span class="token" style="color:var(--code-token-string)">&quot;[out]&quot;</span><span> merge_output.mp3</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="25-合并视频" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#25-合并视频">#</a>2.5 合并视频</h3>
<p class="my-4 leading-7">首先需要将原视频的声音删除。这里的文件名需要加上英文引号，如果不加的话，会提示No such file or directory。</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;audio.mp4&quot;</span><span> -y -f mp4 -an -codec copy -q:v </span><span class="token number">1</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;audio-无声.mp4&quot;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">然后将无声视频和音频融合</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i audio-无声.mp4 -i accompaniment.wav -c:v copy -c:a aac -strict experimental audio-消音.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">即可获得消去人声的视频。但笔者口语不好，觉得原视频的语速有些快了，故又调整了视频倍速为0.8倍速。</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i test.mp4 -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;[0:v]setpts=10/8*PTS[v];[0:a]atempo=0.8[a]&quot;</span><span> -map </span><span class="token" style="color:var(--code-token-string)">&quot;[v]&quot;</span><span> -map </span><span class="token" style="color:var(--code-token-string)">&quot;[a]&quot;</span><span> test-2.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">这条指令同时调整视频倍速和音频倍速，setpts=(倍速的倒数)*PTS[v]，atempo=(倍速)[a]</p>
<h3 id="26-添加水印" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#26-添加水印">#</a>2.6 添加水印</h3>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 在左上角0,0点添加水印</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -y -i tmp.mp4 -i green.png -filter_complex </span><span class="token" style="color:var(--code-token-string)">&#x27;overlay=x=0:y=0&#x27;</span><span> output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 使用华文行楷字体，64字号，红色字，在右上角写水印文字，main_w-text_w-10 就是视频宽度减文字宽度再减 10</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -y -i source.mp4 -vf </span><span class="token" style="color:var(--code-token-string)">&quot;drawtext=fontfile=STXINGKA.ttf: text=&#x27;水印文字&#x27;:x=main_w-text_w-10:y=10:fontsize=64:fontcolor=red:shadowy=2&quot;</span><span> output.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="27-抠像合并" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#27-抠像合并">#</a>2.7 抠像合并</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-vf filtergraph：指定视频过滤器图形，用于对视频进行各种处理，如调整大小、裁剪、旋转、滤镜等。示例：-vf &quot;scale=640:480&quot; 表示将视频调整为 640x480 的大小。</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 绿幕抠像后合并</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i jmfst.mp4 -i greentiger.mp4 -shortest -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;[1:v]chromakey=0x16ff0a:0.1:0.0[ckout];[0:v][ckout]overlay[out]&quot;</span><span> -map </span><span class="token" style="color:var(--code-token-string)">&quot;[out]&quot;</span><span> -y output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 基于 mask 抠像后合并</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i video.mp4 -i matte.mp4 -i background.mp4 -filter_complex </span><span class="token" style="color:var(--code-token-string)">&#x27;[1][0]scale2ref[mask][main];[main][mask]alphamerge[vid];[2:v][vid]overlay[out]&#x27;</span><span> -map </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span>out</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span> complete.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h2 id="3-转换命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#3-转换命令">#</a>3. 转换命令</h2>
<h3 id="31-格式转换" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#31-格式转换">#</a>3.1 格式转换</h3>
<h4 id="参数说明-5" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-5">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-i 文件，a.mp3 为待处理源文件</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-ar 音频抽样率</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-ac 音频Channel数</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-f 强制输出格式 例如mp3, wav等</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 将a.mp3转化程a.wav，设定抽样率为16000</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i a.mp3 -ar </span><span class="token number">16000</span><span> -ac </span><span class="token number">1</span><span> a.wav
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 将Frozen.mka转化成a.mp3</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i Frozen.mka -ar </span><span class="token number">16000</span><span> -f mp3 a.mp3
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 将图片转为视频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -loop </span><span class="token number">1</span><span> -f image2 -i test2.png -vcodec libx264 -r </span><span class="token number">30</span><span> -t </span><span class="token number">3</span><span> test2.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 替换视频中的音频轨</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -i trll.mp3 -map </span><span class="token number">0</span><span>:v -map </span><span class="token number">1</span><span>:a -c:v copy -shortest -y output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 将wav文件转为mp3文件</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i output.wav -c:a libmp3lame output.mp3
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 将mp3文件转为aac文件</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.mp3 -acodec aac -strict experimental -y output.aac</span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
</ul>
<h3 id="32-图片格式转换" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#32-图片格式转换">#</a>3.2 图片格式转换</h3>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.bmp out.jpg
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.bmp out.png</span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h2 id="4-调整命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#4-调整命令">#</a>4. 调整命令</h2>
<h3 id="41-音量调整" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#41-音量调整">#</a>4.1 音量调整</h3>
<h4 id="参数说明-6" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-6">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-i 文件，input.mp3 为待处理源文件</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-af filtergraph：指定音频过滤器图形，用于对音频进行各种处理，如音频增益、降噪、混音等。示例：-af &quot;volume=2.0&quot; 表示将音频增益调整为原来的 2 倍。</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 音量256为原始音量，如果要调整到两倍音量，则设置为512，调整到一半音量，则设为128，下面为减小一半音量的命令</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp3 -vol </span><span class="token number">128</span><span> output.mp3
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 使用dB调整音量</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp3 -af </span><span class="token assign-left" style="color:var(--code-token-variable)">volume</span><span class="token operator">=</span><span>-20dB output.mp3</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7"><strong class="font-semibold">dB的换算公式</strong>
1.1 dB = 1.1 倍，2 dB = 1.25倍，3 dB = 1.4倍，6 dB = 2 倍，10 dB = 3 倍，20 dB = 10 倍，30 dB = 30 倍。其它就可以用上述数值换算，并不困难。(反过来 – 6 dB 就是 1/2 = 0.5)
2.在换算时要把握一个原则，dB数值的相加 等于 倍数的相乘。
例如：40 dB = 20dB + 20 dB = 10 * 10 = 100 倍
-20dB谱宽就是信号衰减到十分之一时的频谱带宽。</p>
</li>
</ul>
<h3 id="42-升降调" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#42-升降调">#</a>4.2 升降调</h3>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 升半音</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;mine.mkv&quot;</span><span> -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;asetrate=48000*2^(1/12),atempo=1/2^(1/12)&quot;</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;output.mkv&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 升全音</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;mine.mkv&quot;</span><span> -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;asetrate=48000*2^(2/12),atempo=1/2^(2/12)&quot;</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;output.mkv&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 降半音</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;mine.mkv&quot;</span><span> -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;asetrate=48000*2^(-1/12),atempo=1/2^(-1/12)&quot;</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;output.mkv&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 降全音</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;mine.mkv&quot;</span><span> -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;asetrate=48000*2^(-2/12),atempo=1/2^(-2/12)&quot;</span><span> </span><span class="token" style="color:var(--code-token-string)">&quot;output.mkv&quot;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="43-音频速率调整" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#43-音频速率调整">#</a>4.3 音频速率调整</h3>
<p class="my-4 leading-7">改变音频速率最简单的方法是直接调整音频的采样率，但是与此同时，这种方法会改变音频的音色。目前一般采用对原音进行重采样，差值等方法来实现。下面这行命令的倍率调整范围为0.5到2。</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mkv -filter:a </span><span class="token" style="color:var(--code-token-string)">&quot;atempo=2.0&quot;</span><span> -vn output.mkv</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">如果想要再快的话，需要更改命令，通过将多个atempo过滤器串接在一起来绕过这个限制。</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mkv -filter:a </span><span class="token" style="color:var(--code-token-string)">&quot;atempo=2.0,atempo=2.0&quot;</span><span> -vn output.mkv</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">将对输入文件 test_cut.mp3 应用音频效果，包括加速 2 倍(atempo)、高通滤波器(highpass)和低通滤波器(lowpass)，并保存为 test_cut_ahl.mp3</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i test_cut.mp3 -af </span><span class="token" style="color:var(--code-token-string)">&quot;atempo=2.0, highpass=f=200, lowpass=f=3000&quot;</span><span> test_cut_ahl.mp3</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="44-视频速率调整" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#44-视频速率调整">#</a>4.4 视频速率调整</h3>
<p class="my-4 leading-7">改变视频的播放速率是通过修改视频的表示时间戳（PTS）来实现的。举个简单的例子，如果在时间戳1和2处显示两个连续帧，我们想要加快视频速度，那么这两个时间戳需要分别变为0.5和1。因此，我们必须把他们乘以0.5。</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mkv -r </span><span class="token number">16</span><span> -filter:v </span><span class="token" style="color:var(--code-token-string)">&quot;setpts=0.5*PTS&quot;</span><span> output.mkv</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">对视频进行加速时，为了不丢帧，可以利用-r 参数指定输出的fps。
一般来说，视频倍速还需要将视频中的音频也一同倍速，通过混合的过滤图实现，命令如下，</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mkv -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;[0:v]setpts=0.5*PTS[v];[0:a]atempo=2.0[a]&quot;</span><span> -map </span><span class="token" style="color:var(--code-token-string)">&quot;[v]&quot;</span><span> -map </span><span class="token" style="color:var(--code-token-string)">&quot;[a]&quot;</span><span> output.mkv</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="45-添加封面" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#45-添加封面">#</a>4.5 添加封面</h3>
<p class="my-4 leading-7">从 test.mp3 音频文件中提取音频流，并从 test.jpeg 图像文件中提取封面图像。然后，它将使用-map 选项将音频流和封面图像流映射到输出文件。-c copy 选项用于直接复制音频流和封面图像流，而不进行重新编码。-id3v2_version 3 选项用于设置 ID3 标签版本为 3，以确保兼容性。-metadata:s:v 选项用于指定封面图像的元数据，如标题和注释。</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i test.mp3 -i test.jpeg -map </span><span class="token number">0</span><span> -map </span><span class="token number">1</span><span> -c copy -id3v2_version </span><span class="token number">3</span><span> -metadata:s:v </span><span class="token assign-left" style="color:var(--code-token-variable)">title</span><span class="token operator">=</span><span class="token" style="color:var(--code-token-string)">&quot;Album cover&quot;</span><span> -metadata:s:v </span><span class="token assign-left" style="color:var(--code-token-variable)">comment</span><span class="token operator">=</span><span class="token" style="color:var(--code-token-string)">&quot;Cover (Front)&quot;</span><span> test_cover.mp3</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h2 id="5-提取命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#5-提取命令">#</a>5. 提取命令</h2>
<h3 id="51-从视频中提取音频" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#51-从视频中提取音频">#</a>5.1 从视频中提取音频</h3>
<h4 id="参数说明-7" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-7">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-map 提取视频-音频流的序号</li>
<li class="[&amp;:not(:first-child)]:mt-2">-b:a 码率 kb/s</li>
<li class="[&amp;:not(:first-child)]:mt-2">-f 强制输出格式 例如mp3, wav等</li>
<li class="[&amp;:not(:first-child)]:mt-2">-vn 表示去除视频流，v 代表视频，n 代表 no 也就是无视频的意思</li>
<li class="[&amp;:not(:first-child)]:mt-2">acodec: 指定音频编码器，copy 指明只拷贝，不做编解码</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 从视频中导出音频</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.mp4 output.mp3
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 从frozen.mkv中，提取音频文件，保存为audio.1.mp3</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i test.mp4 -vn test.mp3
</span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i frozen.mkv -map </span><span class="token number">0</span><span>:1 -b:a 64k -f mp3 a.1.mp3
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i frozen.mp4 -q:a </span><span class="token number">0</span><span> -map a audio.mp3
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i frozen.mp4 -vn -codec copy audio.m4a
</span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i audio.m4a -y -acodec libmp3lame -aq </span><span class="token number">0</span><span> audio.mp3
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.mp4 -acodec copy -vn out.aac
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 提取音频PCM数据</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i out.mp4 -vn -ar </span><span class="token number">44100</span><span> -ac </span><span class="token number">2</span><span> -f s16le out.pcm
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 播放测试</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffplay -ar </span><span class="token number">44100</span><span> -ac </span><span class="token number">2</span><span> -f s16le -i out.pcm
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># PCM转WAV</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f s16be -ar </span><span class="token number">8000</span><span> -ac </span><span class="token number">2</span><span> -acodec pcm_s16be -i input.raw output.wav</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7"><strong class="font-semibold">查看视频，包含的视频流、音频流如下：</strong>
encoder         : libebml v1.2.3 + libmatroska v1.3.0
Duration: 01:42:13.09, start: 0.000000, bitrate: 2954 kb/s
Stream #0:0: Video: h264 (High), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 23.98 fps
Stream #0:1(eng): Audio: ac3, 48000 Hz, 384 kb/s (default)  title           : 英语
Stream #0:2(chi): Audio: ac3, 48000 Hz, 384 kb/s                  title           : 台配
Stream #0:3(chi): Audio: ac3, 48000 Hz, 384 kb/s                  title           : 粤语</p>
<p class="my-4 leading-7"><strong class="font-semibold">查看原音视频文件音轨频率</strong></p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i </span><span class="token" style="color:var(--code-token-string)">&quot;mine.mkv&quot;</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<p class="my-4 leading-7">命令执行后找到音轨的Stream，频率为48000Hz；</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>Stream </span><span class="token" style="color:var(--code-token-comment)">#0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 2316x1440, 22449 kb/s, 30 fps, 30 tbr, 600 tbn, 1200 tbc (default)</span><span>
</span></span><span style="display:block;padding:0 1.25rem">    Metadata:
</span><span style="display:block;padding:0 1.25rem"><span>      creation_time   </span><span class="token class-name" style="color:var(--code-token-symbol)">:</span><span> </span><span class="token number">2022</span><span>-08-31T02:15:18.000000Z
</span></span><span style="display:block;padding:0 1.25rem"><span>      handler_name    </span><span class="token class-name" style="color:var(--code-token-symbol)">:</span><span> Core Media Video
</span></span><span style="display:block;padding:0 1.25rem"><span>      vendor_id       </span><span class="token class-name" style="color:var(--code-token-symbol)">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>      encoder         </span><span class="token class-name" style="color:var(--code-token-symbol)">:</span><span> H.264
</span></span><span style="display:block;padding:0 1.25rem"><span>  Stream </span><span class="token" style="color:var(--code-token-comment)">#0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 2 kb/s (default)</span><span>
</span></span><span style="display:block;padding:0 1.25rem">    Metadata:
</span><span style="display:block;padding:0 1.25rem"><span>      creation_time   </span><span class="token class-name" style="color:var(--code-token-symbol)">:</span><span> </span><span class="token number">2022</span><span>-08-31T02:15:18.000000Z
</span></span><span style="display:block;padding:0 1.25rem"><span>      handler_name    </span><span class="token class-name" style="color:var(--code-token-symbol)">:</span><span> Core Media Audio
</span></span><span style="display:block;padding:0 1.25rem"><span>      vendor_id       </span><span class="token class-name" style="color:var(--code-token-symbol)">:</span><span> </span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span><span class="token" style="color:var(--code-token-punctuation)">[</span><span class="token number">0</span><span class="token" style="color:var(--code-token-punctuation)">]</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="52-提取yuv" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#52-提取yuv">#</a>5.2 提取YUV</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-c:v rawvideo 指定将视频转成原始数据</li>
<li class="[&amp;:not(:first-child)]:mt-2">-pixel_format yuv420p 指定转换格式为 yuv420p</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 从mp4中提取YUV数据</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.mp4 -an -c:v rawvideo -pixel_format yuv420p out.yuv
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 播放测试</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffplay -s wxh out.yuv
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 视频YUV转H264</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f rawvideo -pix_fmt yuv420p -s 640x480 -r </span><span class="token number">30</span><span> -i out.yuv -c:v libx264 -f rawvideo out.h264</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h2 id="6-消音命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#6-消音命令">#</a>6. 消音命令</h2>
<h4 id="参数说明-8" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-8">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-i 文件，input.mp3 为待处理源文件</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-ac 音频Channel数</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp3 -af </span><span class="token assign-left" style="color:var(--code-token-variable)">pan</span><span class="token operator">=</span><span class="token" style="color:var(--code-token-string)">&quot;stereo|c0=c0|c1=-1*c1&quot;</span><span> -ac </span><span class="token number">1</span><span> output.mp3
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp3 -af </span><span class="token" style="color:var(--code-token-string)">&quot;pan=stereo|c0&lt;c0+c1|c1&lt;c0+c1&quot;</span><span> output.mp3
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 消除视频中部份声音</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># ffmpeg -i ad.mp4 -af &quot;volume=enable=&#x27;between(t,2,9)&#x27;:volume=0,volume=enable=&#x27;between(t,15,20)&#x27;:volume=0&quot; adb.mp4</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i ad.mp4 -af </span><span class="token" style="color:var(--code-token-string)">&quot;volume=enable=&#x27;between(t,2,9)&#x27;:volume=0&quot;</span><span> adb.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
</ul>
<h2 id="7-录制命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#7-录制命令">#</a>7. 录制命令</h2>
<h4 id="参数说明-9" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-9">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-f avfoundation 输入设备，从 Mac 的音频输入设备（通常是麦克风）录制音频</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-i 指定从哪儿采集数据，它是一个文件索引号。在我的电脑上，1 代表桌面（可以通过上面的命令查询设备索引号）</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-r 指定帧率。按 ffmpeg 官方文档说-r 与-framerate 作用相同，但实际测试时发现不同。-framerate 用于限制输入，而-r 用于限制输出。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-framerate 限制视频的采集帧率。这个必须要根据提示要求进行设置，如果不设置就会报错。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">&quot;:0&quot; 参数表示默认的音频输入设备</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">&quot;1:0&quot; 参数表示&quot;视频输入设备:音频输入设备&quot;</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 查询录制设备</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f avfoundation -list_devices </span><span class="token boolean">true</span><span> -i </span><span class="token" style="color:var(--code-token-string)">&quot;&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 录制音频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f avfoundation -i </span><span class="token" style="color:var(--code-token-string)">&quot;:0&quot;</span><span> output.wav
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 录制音频裸数据</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f avfoundation -i :0 -ar </span><span class="token number">44100</span><span> -f s16le out.pcm
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 录制视频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f avfoundation -i </span><span class="token" style="color:var(--code-token-string)">&quot;1:0&quot;</span><span> out.avi
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -framerate </span><span class="token number">30</span><span> -f avfoundation -i </span><span class="token number">0</span><span> out.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 视频+音频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -framerate </span><span class="token number">30</span><span> -f avfoundation -i </span><span class="token number">0</span><span>:0 out.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 录屏</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f avfoundation -i </span><span class="token number">1</span><span> -r </span><span class="token number">30</span><span> out.yuv
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 录屏+声音</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -f avfoundation -i </span><span class="token number">1</span><span>:0 -r </span><span class="token number">29.97</span><span> -c:v libx264 -crf </span><span class="token number">0</span><span> -c:a libfdk_aac -profile:a aac_he_v2 -b:a 48k out.flv</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
</li>
</ul>
<h2 id="8-视频处理" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#8-视频处理">#</a>8. 视频处理</h2>
<h3 id="81-视频转码" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#81-视频转码">#</a>8.1 视频转码</h3>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.avi output.mp4
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.mp4 -vcodec copy -acodec copy output.flv</span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="82-抽取视频流" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#82-抽取视频流">#</a>8.2 抽取视频流</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">vcodec: 指定视频编码器，copy 指明只拷贝，不做编解码。</li>
<li class="[&amp;:not(:first-child)]:mt-2">an: a 代表视频，n 代表 no 也就是无音频的意思。</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -vcodec copy -an out.h264
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.mp4 -vcodec copy -an output.mp4</span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="82-视频压缩" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#82-视频压缩">#</a>8.2 视频压缩</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-b:v 视频码率设置</li>
<li class="[&amp;:not(:first-child)]:mt-2">-vf scale 指定使用简单过滤器 scale，iw/2:-1 中的 iw 指定按整型取视频的宽度。-1表示高度随宽度一起变化。</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 压缩的文件更大更清晰，一般情况下不用</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i test_ffmpeg.mp4
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 减小视频码率，压缩的更模糊</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i out.MP4 -b:v 500k 512k_out.mp4
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 通过scale缩放视频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>fmpeg -i input.mp4 -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">scale</span><span class="token operator">=</span><span>iw/2:-1 output.mp4
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mpg -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">scale</span><span class="token operator">=</span><span>iw/2:ih/2 output.mp4
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mpg -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">scale</span><span class="token operator">=</span><span>iw*0.9:ih*0.9 output.mp4
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 用黄金比例缩放输入值= 1.61803398874989484820</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mpg -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">scale</span><span class="token operator">=</span><span>iw/PHI:ih/PHI output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 降低视频的分辨率且转换视频格式</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.avi -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">scale</span><span class="token operator">=</span><span class="token number">640</span><span>:360 out.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 音视频合并，从使用看.h264格式的视频会出现抖动现象</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i out.h264 -i out.aac -vcodec copy -acodec copy out.mp4</span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="82-视频速率调整" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#82-视频速率调整">#</a>8.2 视频速率调整</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-vf scale 指定使用简单过滤器 scale，iw/2:-1 中的 iw 指定按整型取视频的宽度。-1表示高度随宽度一起变化。</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 把视频的帧速率变为0.98倍，变慢了</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">setpts</span><span class="token operator">=</span><span>PTS/0.98 -af </span><span class="token assign-left" style="color:var(--code-token-variable)">atempo</span><span class="token operator">=</span><span class="token number">2</span><span> output-3.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="83-视频裁剪" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#83-视频裁剪">#</a>8.3 视频裁剪</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">crop 格式：crop=w:h:x :y</p>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">w: 输出的宽度。可以使用 in_w 表式输入视频的宽度。</li>
<li class="[&amp;:not(:first-child)]:mt-2">h: 输出的高度。可以使用 in_h 表式输入视频的高度。</li>
<li class="[&amp;:not(:first-child)]:mt-2">x : X 坐标</li>
<li class="[&amp;:not(:first-child)]:mt-2">y : Y 坐标</li>
</ul>
<p class="my-4 leading-7">如果 x 和 y 设置为 0,说明从左上角开始裁剪。如果不写是从中心点裁剪。</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-strict -2 指明音频使有 AAC</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-f hls 转成 m3u8 格式</p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-vf 视频过滤</p>
</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 基本的裁剪过滤器</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -vf </span><span class="token" style="color:var(--code-token-string)">&quot;crop=w:h:x:y&quot;</span><span> output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 输入视频裁剪为 640x480 像素，当不指定位置时x:y，FFmpeg 会自动从中心裁剪输入视频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -vf </span><span class="token" style="color:var(--code-token-string)">&quot;crop=640:480&quot;</span><span> output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 按照尺寸和未知裁剪视频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mov  -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">crop</span><span class="token operator">=</span><span>in_w-300:in_h-200 -c:v libx264 -c:a copy -video_size 1280x720 output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 有时，视频周围会有黑色边框以适应宽高比。在这种情况下，您可以使用“ cropDetect ”过滤器来自动检测裁剪尺寸和位置。滤镜将检测输入视频的非黑色区域，然后计算并打印建议的裁剪尺寸和位置</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -vf cropdetect -f null - </span><span class="token operator file-descriptor" style="color:#EBCB8B;font-weight:bold">2</span><span class="token operator">&gt;</span><span class="token file-descriptor" style="color:#EBCB8B;font-weight:bold">&amp;1</span><span> </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-function)">awk</span><span> </span><span class="token" style="color:var(--code-token-string)">&#x27;/crop/ { print $NF }&#x27;</span><span> </span><span class="token operator">|</span><span> </span><span class="token" style="color:var(--code-token-function)">tail</span><span> -1
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># HLS切片，制作m3u8格式</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i input.mp4 -c:v libx264 -c:a libfdk_aac -strict -2 -f hls  out.m3u8</span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="84-视频翻转" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#84-视频翻转">#</a>8.4 视频翻转</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">hflip 水平翻转</li>
<li class="[&amp;:not(:first-child)]:mt-2">如果要修改为垂直翻转可以用 vflip</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span>ffmpeg  -i input.mp4 -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;[0:v]pad=w=2*iw[a];[0:v]hflip[b];[a][b]overlay=x=w&quot;</span><span> output.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="85-视频截图" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#85-视频截图">#</a>8.5 视频截图</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">从上面的 out.mp4 中提取第 10 秒的视频帧，并将其保存为输出文件 output.jpg。参数-vframes 1表示只提取一帧。</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 按照帧位置提取图片</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -ss 00:00:10 -vframes </span><span class="token number">1</span><span> output.jpg
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 设置视频帧为1，从中抽取图片</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">fps</span><span class="token operator">=</span><span class="token number">1</span><span> %04d.png
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 全视频转图片集合</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -r </span><span class="token number">1</span><span> -i output-1.mp4 -r </span><span class="token number">1</span><span> images </span><span class="token" style="color:var(--code-token-string)">&quot;images/</span><span class="token" style="color:var(--code-token-variable)">$filename</span><span class="token" style="color:var(--code-token-string)">%03d.png&quot;</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 图片集合转视频</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -r </span><span class="token number">1</span><span>/5 -i image2/%03d.png -c:v libx264 -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">fps</span><span class="token operator">=</span><span class="token number">25</span><span> -pix_fmt yuv420p output.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 视频转GIF，从23秒开始，向后取3.8秒，做成一个gif图片</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -ss </span><span class="token number">23.0</span><span> -t </span><span class="token number">3.8</span><span> -i input.mp4 output_trimmed.gif</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="86-去除水印" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#86-去除水印">#</a>8.6 去除水印</h3>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 去除视频input.mp4中位置在左上角(160, 756)，宽度398高度108的矩形范围</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;delogo=x=160:y=756:w=398:h=108&quot;</span><span> output.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="87-添加水印" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#87-添加水印">#</a>8.7 添加水印</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-vf 中的 movie 指定 logo 位置。scale 指定 logo 大小。overlay 指定 logo 摆放的位置</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 图片水印</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i out.mp4  -vf </span><span class="token" style="color:var(--code-token-string)">&quot;movie=logo.png,scale=128:72[watermask];[in][watermask] overlay=96:54 [out]&quot;</span><span> water_img.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 把图片水印，放到左下角，overlay=0:(main_h-overlay_h)</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.mp4 -i watermark.png -filter_complex </span><span class="token" style="color:var(--code-token-string)">&quot;[1][0]scale2ref=oh*mdar:ih*0.2[logo][video];[video][logo]overlay=0:(main_h-overlay_h)&quot;</span><span> output_bottom_left.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 文字水印</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i out.mp4 -vf </span><span class="token" style="color:var(--code-token-string)">&quot;drawtext=fontfile=FZBaoHTJW_Xi.TTF: text=&#x27;anyRTC&#x27;:x=128:y=72:fontsize=24:fontcolor=red:shadowy=2&quot;</span><span> water_text.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 给GIF上增加文字</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.gif -vf </span><span class="token" style="color:var(--code-token-string)">&quot;drawtext=text=&#x27;When my code works the first time&#x27;:fontsize=30:x=10:y=10:fontcolor=white:fontfile=C:/Windows/Fonts/Arial.ttf&quot;</span><span> output_font.gif
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i input.gif -vf </span><span class="token" style="color:var(--code-token-string)">&quot;drawtext=text=&#x27;When my code works &#x27;:fontsize=30:x=10:y=10:fontcolor=white,drawtext=text=&#x27;the first time&#x27;:fontsize=30:x=10:y=(10+text_h):fontcolor=white&quot;</span><span> output_break.gif</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="88-添加字幕" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#88-添加字幕">#</a>8.8 添加字幕</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-vf 中的 subtitles指定字幕文件位置</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 视频添加字幕srt</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i video_test.mp4 -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">subtitles</span><span class="token operator">=</span><span>subtitle.srt out_subtitle.mp4
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 视频添加音乐+字幕</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i video_test.mp4 -i audio_bg.mp3 -vf </span><span class="token assign-left" style="color:var(--code-token-variable)">subtitles</span><span class="token operator">=</span><span>all_mp3_srt.srt out_mp3_subtitle.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h3 id="89-添加thumbnail文件管理时看到的封面" class="mt-10 mb-2 leading-7 text-xl title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#89-添加thumbnail文件管理时看到的封面">#</a>8.9 添加thumbnail，文件管理时看到的封面</h3>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">-vf 中的 subtitles指定字幕文件位置</li>
</ul>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 给视频文件添加thumbnail</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span>ffmpeg -i output-he.mp4 -i zhifou.png -map </span><span class="token number">1</span><span> -map </span><span class="token number">0</span><span> -c copy -disposition:0 attached_pic output.mp4</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h2 id="" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#">#</a></h2>
<h2 id="9-下载命令" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#9-下载命令">#</a>9. 下载命令</h2>
<h4 id="参数说明-10" class="mt-8 leading-6 text-base title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#参数说明-10">#</a>参数说明</h4>
<ul class="list-disc pl-5 my-4 leading-7">
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7">-i 文件，待处理源文件</p>
<div class="language-shell"><div class="rspress-code-content rspress-scrollbar"><div><pre class="code" style="background-color:inherit"><code class="language-shell" style="white-space:pre"><span style="display:block;padding:0 1.25rem"><span class="token" style="color:var(--code-token-comment)"># 将在线 flv 流保存到本地</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -i http://demo.com/input.flv -c copy dump.flv
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 将本地视频以 rtmp 协议推流</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -re -i ./demo.mp4 -c copy -f flv rtmp://publish.com/live/demo123456
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># m3u8视频下载</span><span>
</span></span><span style="display:block;padding:0 1.25rem">ffmpeg -protocol_whitelist concat,file,http,https,tcp,tls,crypto  -i  你的.m3u8 -c copy output.mp4
</span><span style="display:block;padding:0 1.25rem">ffmpeg -protocol_whitelist concat,file,http,https,tcp,tls,crypto  -i  https://xxx.m3u8 -c copy output.mp4
</span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 快手视频下载</span><span>
</span></span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 直接使用Downie4下载</span><span>
</span></span><span style="display:block;padding:0 1.25rem">
</span><span style="display:block;padding:0 1.25rem"><span></span><span class="token" style="color:var(--code-token-comment)"># 优酷视频下载</span></span></code></pre></div><div class="code-button-group_15153"><button><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16 7H3V5h13v2M3 19h13v-2H3v2m19-7-4-3v2H3v2h15v2l4-3Z"></path></svg></button><button class="code-copy-button_15153"><svg width="32" height="32" class="icon-copy_15153"><path fill="currentColor" d="M28 10v18H10V10h18m0-2H10a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2Z"></path><path fill="currentColor" d="M4 18H2V4a2 2 0 0 1 2-2h14v2H4Z"></path></svg><svg width="32" height="32" class="icon-success_15153"><path fill="#49cd37" d="m13 24-9-9 1.414-1.414L13 21.171 26.586 7.586 28 9 13 24z"></path></svg></button></div></div></div>
<h2 id="推荐" class="mt-14 mb-6 text-2xl tracking-tight title_3b154"><a class="link_3b154 header-anchor" aria-hidden="true" href="#推荐">#</a>推荐</h2>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><a href="https://github.com/FFmpeg/FFmpeg" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">FFmpeg</a></p>
</li>
<li class="[&amp;:not(:first-child)]:mt-2">
<p class="my-4 leading-7"><a href="http://zhifou.co/ffmpeg-intro" target="_blank" rel="noopener noreferrer" class="link_03735  link_3b154 inline-link_3b154">知否</a></p>
</li>
</ul><!--/$--></div><div class="rspress-doc-footer"><div class="postFooter_9487e flex flex-col"><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_2a070 flex flex-col"></div><div class="next_2a070 flex flex-col"><a class="link_03735 pagerLink_2a070 next_2a070 cursor-pointer" target="" href="/2024/02/25/typescript-react-type/index.html"><span class="desc_2a070">下一篇</span><span class="title_2a070">Typescript在React中的类型应用</span></a></div></div></div><footer class="mt-8"><div class="xs:flex pb-5 px-2 justify-end items-center"><div class="flex text-sm text-text-2 leading-6 sm:leading-8 font-medium"><p>最后编辑时间<!-- -->: </p><span>2024/2/26 17:26:35</span></div></div><div class="flex flex-col"><a href="https://github.com/zhifou/zhifou.github.io/tree/main/site/source/../source/_posts/2024-02-24-ffmpeg-intro.md" target="_blank" class="editLink_2a169">📝 在 GitHub 上编辑此页</a></div><div class="flex flex-col sm:flex-row sm:justify-around gap-4 pt-6"><div class="prev_e7091 flex flex-col"></div><div class="next_e7091 flex flex-col"></div></div></footer></div></div></div><div class="aside-container_edeb4"><div><div class="postInfoContainer_4a868"><div class="leading-7 block text-sm font-semibold pl-3">文章信息</div><div class="postInfoItem_4a868 block"><span class="postInfoLabel_4a868">分类：</span><span class="undefined">音视频</span></div><div class="postInfoItem_4a868 block"><span class="postInfoLabel_4a868">标签：</span><span class="undefined">ffmpeg, ffplay</span></div><div class="postInfoItem_4a868 block"><span class="postInfoLabel_4a868">发表于：</span><span class="undefined">2024-02-25</span></div><div class="postInfoItem_4a868 block"><span class="postInfoLabel_4a868">字数统计：</span><span class="undefined">2.6k<!-- --> 字</span></div><div class="postInfoItem_4a868 block"><span class="postInfoLabel_4a868">阅读时长：</span><span class="undefined">8<!-- --> 分钟</span></div><div class="postInfoItem_4a868 block"><span class="postInfoLabel_4a868">阅读量：</span><span class="undefined"></span></div></div><div class="flex flex-col"><div class="&lt;lg:hidden"><div id="aside-container" class="relative text-sm font-medium"><div class="leading-7 block text-sm font-semibold pl-3">目录</div><nav class="mt-1"><ul class="relative"><li><a href="#ffmpeg-是一个命令行音视频后期处理软件" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">ffmpeg 是一个命令行音视频后期处理软件</span></a></li><li><a href="#参数列表" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数列表</span></a></li><li><a href="#1-裁剪命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">1. 裁剪命令</span></a></li><li><a href="#参数说明" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#2-合成命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">2. 合成命令</span></a></li><li><a href="#21-混合合成" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2.1 混合合成</span></a></li><li><a href="#参数说明-1" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#22-连接合成" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2.2 连接合成</span></a></li><li><a href="#参数说明-2" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#23-淡出效果" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2.3 淡出效果</span></a></li><li><a href="#参数说明-3" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#24-合并音频" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2.4 合并音频</span></a></li><li><a href="#参数说明-4" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#25-合并视频" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2.5 合并视频</span></a></li><li><a href="#26-添加水印" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2.6 添加水印</span></a></li><li><a href="#27-抠像合并" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">2.7 抠像合并</span></a></li><li><a href="#3-转换命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">3. 转换命令</span></a></li><li><a href="#31-格式转换" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">3.1 格式转换</span></a></li><li><a href="#参数说明-5" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#32-图片格式转换" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">3.2 图片格式转换</span></a></li><li><a href="#4-调整命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">4. 调整命令</span></a></li><li><a href="#41-音量调整" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">4.1 音量调整</span></a></li><li><a href="#参数说明-6" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#42-升降调" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">4.2 升降调</span></a></li><li><a href="#43-音频速率调整" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">4.3 音频速率调整</span></a></li><li><a href="#44-视频速率调整" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">4.4 视频速率调整</span></a></li><li><a href="#45-添加封面" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">4.5 添加封面</span></a></li><li><a href="#5-提取命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">5. 提取命令</span></a></li><li><a href="#51-从视频中提取音频" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">5.1 从视频中提取音频</span></a></li><li><a href="#参数说明-7" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#52-提取yuv" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">5.2 提取YUV</span></a></li><li><a href="#6-消音命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">6. 消音命令</span></a></li><li><a href="#参数说明-8" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#7-录制命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">7. 录制命令</span></a></li><li><a href="#参数说明-9" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li><li><a href="#8-视频处理" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">8. 视频处理</span></a></li><li><a href="#81-视频转码" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.1 视频转码</span></a></li><li><a href="#82-抽取视频流" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.2 抽取视频流</span></a></li><li><a href="#82-视频压缩" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.2 视频压缩</span></a></li><li><a href="#82-视频速率调整" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.2 视频速率调整</span></a></li><li><a href="#83-视频裁剪" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.3 视频裁剪</span></a></li><li><a href="#84-视频翻转" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.4 视频翻转</span></a></li><li><a href="#85-视频截图" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.5 视频截图</span></a></li><li><a href="#86-去除水印" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.6 去除水印</span></a></li><li><a href="#87-添加水印" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.7 添加水印</span></a></li><li><a href="#88-添加字幕" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.8 添加字幕</span></a></li><li><a href="#89-添加thumbnail文件管理时看到的封面" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:12px;font-weight:semibold"><span class="aside-link-text block">8.9 添加thumbnail，文件管理时看到的封面</span></a></li><li><a href="#" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block"></span></a></li><li><a href="#9-下载命令" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:0;font-weight:semibold"><span class="aside-link-text block">9. 下载命令</span></a></li><li><a href="#参数说明-10" class="aside-link transition-all duration-300 hover:text-text-1 text-text-2 block" style="padding-left:24px;font-weight:semibold"><span class="aside-link-text block">参数说明</span></a></li></ul></nav></div></div></div></div></div></div></div></section><footer class="mt-6 py-8 px-6 sm:p-8 w-full border-t border-solid border-divider-light"><div class="m-auto w-full text-center"><div class="font-meduim text-sm text-text-2">© 2015-<!-- -->2024<!-- --> zhifou. Powered by<!-- --> <a href="https://rspress.dev/" target="_blank" rel="noreferrer">Rspress</a>.</div></div></footer></div></div></div><div id="search-container"></div></body></html>