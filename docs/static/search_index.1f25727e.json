[{"id":0,"title":"","content":"","routePath":"/404","lang":"","toc":[],"domain":"","frontmatter":{"pageType":404},"version":""},{"id":1,"title":"我就是我，不一样的烟火","content":"#","routePath":"/about/","lang":"","toc":[],"domain":"","frontmatter":{},"version":""},{"id":2,"title":"归档","content":"","routePath":"/blog/archives","lang":"","toc":[],"domain":"","frontmatter":{"layout":"archives","title":"归档"},"version":""},{"id":3,"title":"分类","content":"","routePath":"/blog/categories","lang":"","toc":[],"domain":"","frontmatter":{"layout":"categories","title":"分类"},"version":""},{"id":4,"title":"友情链接","content":"#\n\n欢迎光顾我的小站。如果你也想和我交换友链，可以在下方留言。\n\n * 知否知否","routePath":"/blog/flinks","lang":"","toc":[],"domain":"","frontmatter":{"pageType":"doc","title":"友情链接","sidebar":false,"outline":false},"version":""},{"id":5,"title":"标签","content":"","routePath":"/blog/tags","lang":"","toc":[],"domain":"","frontmatter":{"layout":"tags","title":"标签"},"version":""},{"id":6,"title":"引导页","content":"#\n\nTIP\n\n博客还在基于Rspress优化中，敬请期待","routePath":"/guide/","lang":"","toc":[],"domain":"","frontmatter":{},"version":""},{"id":7,"title":"首页","content":"","routePath":"/","lang":"","toc":[],"domain":"","frontmatter":{"layout":"home","title":"首页"},"version":""},{"id":8,"title":"ffmpeg 是一个命令行音视频后期处理软件","content":"ffmpeg 是一个命令行音视频后期处理软件#\n\n参数列表#\n\n * -i input_file：指定输入文件的路径和名称。示例：-i input.mp4\n * -ss position：指定从输入文件的哪个时间位置开始处理，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-ss\n   00:01:30.500 表示从 1 分 30.5 秒开始处理。\n * -t duration：指定处理的持续时间，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-t 00:00:45 表示处理 45\n   秒的内容。\n * -vf filtergraph：指定视频过滤器图形，用于对视频进行各种处理，如调整大小、裁剪、旋转、滤镜等。示例：-vf \"scale=640:480\"\n   表示将视频调整为 640x480 的大小。\n * -af filtergraph：指定音频过滤器图形，用于对音频进行各种处理，如音频增益、降噪、混音等。示例：-af \"volume=2.0\"\n   表示将音频增益调整为原来的 2 倍。\n * -c:v codec：指定视频编解码器。示例：-c:v libx264 表示使用 libx264 编码器进行视频编码。\n * -c:a codec：指定音频编解码器。示例：-c:a aac 表示使用 AAC 编码器进行音频编码。\n * -b:v bitrate：指定视频的比特率，即视频的质量。较高的比特率通常意味着更好的视频质量，但文件大小也会增加。示例：-b:v 1000k\n   表示视频比特率为 1000kbps。\n * -b:a bitrate：指定音频的比特率，即音频的质量。较高的比特率通常意味着更好的音频质量，但文件大小也会增加。示例：-b:a 128k\n   表示音频比特率为 128kbps。\n * -r framerate：指定视频的帧率，即每秒播放的画面数量。较高的帧率可以获得更流畅的视频，但也会增加文件大小。示例：-r 30 表示视频帧率为 30\n   帧每秒。\n * -y 不询问直接覆盖原有的同名文件\n\n\n1. 裁剪命令#\n\n参数说明#\n\n * -i input_file：指定输入文件的路径和名称。示例：-i input.mp3\n\n * -ss position：指定从输入文件的哪个时间位置开始处理，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-ss\n   00:01:30.500 表示从 1 分 30.5 秒开始处理。\n\n * -t duration：指定处理的持续时间，格式为 HH:MM:SS.xxx（小时:分钟:秒.毫秒）。示例：-t 00:00:45 表示处理 45\n   秒的内容。\n\n * -to 终止点时间\n\n * -c copy 表示不改变音频和视频的编码格式，直接拷贝，提升效率\n\n * output.mp3 为处理结果文件\n   \n   \n\n\n2. 合成命令#\n\n\n2.1 混合合成#\n\n参数说明#\n\n * -i 文件 1.mp3 和 2.mp3 为待合成的两个源文件\n\n * -filter_complex 过滤器参数\n\n * amix=inputs 配置输入的整体样本数\n\n * duration，first：长度取决于第一个文件，longest：长度取决于时间最长文件，shortest：长度取决于时间最短文件\n\n * dropout_transition：输入流结束时用于体积重新规范化的过渡时间\n\n * -f mp3 设置导出文件格式\n   \n   \n\n\n2.2 连接合成#\n\n参数说明#\n\n * concat 合并文件指令\n   \n   \n\n * 使用txt文件集合concat合并，视频合并使用这个list合并方式\n   \n   \n\n\n2.3 淡出效果#\n\n参数说明#\n\n * afade 淡入淡出指令\n\n * 从 st 秒开始，经过 d 秒钟的淡出效果\n   \n   \n\n\n2.4 合并音频#\n\n参数说明#\n\n\n\n\n2.5 合并视频#\n\n首先需要将原视频的声音删除。这里的文件名需要加上英文引号，如果不加的话，会提示No such file or directory。\n\n\n\n然后将无声视频和音频融合\n\n\n\n即可获得消去人声的视频。但笔者口语不好，觉得原视频的语速有些快了，故又调整了视频倍速为0.8倍速。\n\n\n\n这条指令同时调整视频倍速和音频倍速，setpts=(倍速的倒数)*PTS[v]，atempo=(倍速)[a]\n\n\n2.6 添加水印#\n\n\n\n\n2.7 抠像合并#\n\n * -vf filtergraph：指定视频过滤器图形，用于对视频进行各种处理，如调整大小、裁剪、旋转、滤镜等。示例：-vf \"scale=640:480\"\n   表示将视频调整为 640x480 的大小。\n\n\n\n\n3. 转换命令#\n\n\n3.1 格式转换#\n\n参数说明#\n\n * -i 文件，a.mp3 为待处理源文件\n\n * -ar 音频抽样率\n\n * -ac 音频Channel数\n\n * -f 强制输出格式 例如mp3, wav等\n   \n   \n\n\n3.2 图片格式转换#\n\n\n\n\n4. 调整命令#\n\n\n4.1 音量调整#\n\n参数说明#\n\n * -i 文件，input.mp3 为待处理源文件\n\n * -af filtergraph：指定音频过滤器图形，用于对音频进行各种处理，如音频增益、降噪、混音等。示例：-af \"volume=2.0\"\n   表示将音频增益调整为原来的 2 倍。\n   \n   \n   \n   dB的换算公式 1.1 dB = 1.1 倍，2 dB = 1.25倍，3 dB = 1.4倍，6 dB = 2 倍，10 dB = 3 倍，20 dB\n   = 10 倍，30 dB = 30 倍。其它就可以用上述数值换算，并不困难。(反过来 – 6 dB 就是 1/2 = 0.5)\n   2.在换算时要把握一个原则，dB数值的相加 等于 倍数的相乘。 例如：40 dB = 20dB + 20 dB = 10 * 10 = 100 倍\n   -20dB谱宽就是信号衰减到十分之一时的频谱带宽。\n\n\n4.2 升降调#\n\n\n\n\n4.3 音频速率调整#\n\n改变音频速率最简单的方法是直接调整音频的采样率，但是与此同时，这种方法会改变音频的音色。目前一般采用对原音进行重采样，差值等方法来实现。下面这行命令的倍率调整范\n围为0.5到2。\n\n\n\n如果想要再快的话，需要更改命令，通过将多个atempo过滤器串接在一起来绕过这个限制。\n\n\n\n将对输入文件 test_cut.mp3 应用音频效果，包括加速 2 倍(atempo)、高通滤波器(highpass)和低通滤波器(lowpass)，并保存为\ntest_cut_ahl.mp3\n\n\n\n\n4.4 视频速率调整#\n\n改变视频的播放速率是通过修改视频的表示时间戳（PTS）来实现的。举个简单的例子，如果在时间戳1和2处显示两个连续帧，我们想要加快视频速度，那么这两个时间戳需要分\n别变为0.5和1。因此，我们必须把他们乘以0.5。\n\n\n\n对视频进行加速时，为了不丢帧，可以利用-r 参数指定输出的fps。 一般来说，视频倍速还需要将视频中的音频也一同倍速，通过混合的过滤图实现，命令如下，\n\n\n\n\n4.5 添加封面#\n\n从 test.mp3 音频文件中提取音频流，并从 test.jpeg 图像文件中提取封面图像。然后，它将使用-map\n选项将音频流和封面图像流映射到输出文件。-c copy 选项用于直接复制音频流和封面图像流，而不进行重新编码。-id3v2_version 3 选项用于设置\nID3 标签版本为 3，以确保兼容性。-metadata:s:v 选项用于指定封面图像的元数据，如标题和注释。\n\n\n\n\n5. 提取命令#\n\n\n5.1 从视频中提取音频#\n\n参数说明#\n\n * -map 提取视频-音频流的序号\n * -b:a 码率 kb/s\n * -f 强制输出格式 例如mp3, wav等\n * -vn 表示去除视频流，v 代表视频，n 代表 no 也就是无视频的意思\n * acodec: 指定音频编码器，copy 指明只拷贝，不做编解码\n\n\n\n查看视频，包含的视频流、音频流如下： encoder : libebml v1.2.3 + libmatroska v1.3.0 Duration:\n01:42:13.09, start: 0.000000, bitrate: 2954 kb/s Stream #0:0: Video: h264\n(High), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 23.98 fps Stream #0:1(eng): Audio:\nac3, 48000 Hz, 384 kb/s (default) title : 英语 Stream #0:2(chi): Audio: ac3, 48000\nHz, 384 kb/s title : 台配 Stream #0:3(chi): Audio: ac3, 48000 Hz, 384 kb/s title :\n粤语\n\n查看原音视频文件音轨频率\n\n\n\n命令执行后找到音轨的Stream，频率为48000Hz；\n\n\n\n\n5.2 提取YUV#\n\n * -c:v rawvideo 指定将视频转成原始数据\n * -pixel_format yuv420p 指定转换格式为 yuv420p\n\n\n\n\n6. 消音命令#\n\n参数说明#\n\n * -i 文件，input.mp3 为待处理源文件\n\n * -ac 音频Channel数\n   \n   \n\n\n7. 录制命令#\n\n参数说明#\n\n * -f avfoundation 输入设备，从 Mac 的音频输入设备（通常是麦克风）录制音频\n\n * -i 指定从哪儿采集数据，它是一个文件索引号。在我的电脑上，1 代表桌面（可以通过上面的命令查询设备索引号）\n\n * -r 指定帧率。按 ffmpeg 官方文档说-r 与-framerate 作用相同，但实际测试时发现不同。-framerate 用于限制输入，而-r\n   用于限制输出。\n\n * -framerate 限制视频的采集帧率。这个必须要根据提示要求进行设置，如果不设置就会报错。\n\n * \":0\" 参数表示默认的音频输入设备\n\n * \"1:0\" 参数表示\"视频输入设备:音频输入设备\"\n   \n   \n\n\n8. 视频处理#\n\n\n8.1 视频转码#\n\n\n\n\n8.2 抽取视频流#\n\n * vcodec: 指定视频编码器，copy 指明只拷贝，不做编解码。\n * an: a 代表视频，n 代表 no 也就是无音频的意思。\n\n\n\n\n8.2 视频压缩#\n\n * -b:v 视频码率设置\n * -vf scale 指定使用简单过滤器 scale，iw/2:-1 中的 iw 指定按整型取视频的宽度。-1表示高度随宽度一起变化。\n\n\n\n\n8.2 视频速率调整#\n\n * -vf scale 指定使用简单过滤器 scale，iw/2:-1 中的 iw 指定按整型取视频的宽度。-1表示高度随宽度一起变化。\n\n\n\n\n8.3 视频裁剪#\n\n * crop 格式：crop=w:h:x :y\n   \n   * w: 输出的宽度。可以使用 in_w 表式输入视频的宽度。\n   * h: 输出的高度。可以使用 in_h 表式输入视频的高度。\n   * x : X 坐标\n   * y : Y 坐标\n   \n   如果 x 和 y 设置为 0,说明从左上角开始裁剪。如果不写是从中心点裁剪。\n\n * -strict -2 指明音频使有 AAC\n\n * -f hls 转成 m3u8 格式\n\n * -vf 视频过滤\n\n\n\n\n8.4 视频翻转#\n\n * hflip 水平翻转\n * 如果要修改为垂直翻转可以用 vflip\n\n\n\n\n8.5 视频截图#\n\n * 从上面的 out.mp4 中提取第 10 秒的视频帧，并将其保存为输出文件 output.jpg。参数-vframes 1表示只提取一帧。\n\n\n\n\n8.6 去除水印#\n\n\n\n\n8.7 添加水印#\n\n * -vf 中的 movie 指定 logo 位置。scale 指定 logo 大小。overlay 指定 logo 摆放的位置\n\n\n\n\n8.8 添加字幕#\n\n * -vf 中的 subtitles指定字幕文件位置\n\n\n\n\n8.9 添加thumbnail，文件管理时看到的封面#\n\n * -vf 中的 subtitles指定字幕文件位置\n\n\n\n\n#\n\n\n9. 下载命令#\n\n参数说明#\n\n * -i 文件，待处理源文件\n   \n   \n   \n   \n   推荐\n\n * FFmpeg\n\n * 知否","routePath":"/2024/02/24/ffmpeg-intro/","lang":"","toc":[{"text":"ffmpeg 是一个命令行音视频后期处理软件","id":"ffmpeg-是一个命令行音视频后期处理软件","depth":2,"charIndex":-1},{"text":"参数列表","id":"参数列表","depth":4,"charIndex":24},{"text":"1. 裁剪命令","id":"1-裁剪命令","depth":2,"charIndex":893},{"text":"参数说明","id":"参数说明","depth":4,"charIndex":903},{"text":"2. 合成命令","id":"2-合成命令","depth":2,"charIndex":1236},{"text":"2.1 混合合成","id":"21-混合合成","depth":3,"charIndex":1247},{"text":"参数说明","id":"参数说明-1","depth":4,"charIndex":1258},{"text":"2.2 连接合成","id":"22-连接合成","depth":3,"charIndex":1497},{"text":"参数说明","id":"参数说明-2","depth":4,"charIndex":1508},{"text":"2.3 淡出效果","id":"23-淡出效果","depth":3,"charIndex":1589},{"text":"参数说明","id":"参数说明-3","depth":4,"charIndex":1600},{"text":"2.4 合并音频","id":"24-合并音频","depth":3,"charIndex":1659},{"text":"参数说明","id":"参数说明-4","depth":4,"charIndex":1670},{"text":"2.5 合并视频","id":"25-合并视频","depth":3,"charIndex":1680},{"text":"2.6 添加水印","id":"26-添加水印","depth":3,"charIndex":1886},{"text":"2.7 抠像合并","id":"27-抠像合并","depth":3,"charIndex":1900},{"text":"3. 转换命令","id":"3-转换命令","depth":2,"charIndex":2020},{"text":"3.1 格式转换","id":"31-格式转换","depth":3,"charIndex":2031},{"text":"参数说明","id":"参数说明-5","depth":4,"charIndex":2042},{"text":"3.2 图片格式转换","id":"32-图片格式转换","depth":3,"charIndex":2141},{"text":"4. 调整命令","id":"4-调整命令","depth":2,"charIndex":2157},{"text":"4.1 音量调整","id":"41-音量调整","depth":3,"charIndex":2168},{"text":"参数说明","id":"参数说明-6","depth":4,"charIndex":2179},{"text":"4.2 升降调","id":"42-升降调","depth":3,"charIndex":2577},{"text":"4.3 音频速率调整","id":"43-音频速率调整","depth":3,"charIndex":2590},{"text":"4.4 视频速率调整","id":"44-视频速率调整","depth":3,"charIndex":2844},{"text":"4.5 添加封面","id":"45-添加封面","depth":3,"charIndex":3047},{"text":"5. 提取命令","id":"5-提取命令","depth":2,"charIndex":3256},{"text":"5.1 从视频中提取音频","id":"51-从视频中提取音频","depth":3,"charIndex":3267},{"text":"参数说明","id":"参数说明-7","depth":4,"charIndex":3282},{"text":"5.2 提取YUV","id":"52-提取yuv","depth":3,"charIndex":3874},{"text":"6. 消音命令","id":"6-消音命令","depth":2,"charIndex":3960},{"text":"参数说明","id":"参数说明-8","depth":4,"charIndex":3970},{"text":"7. 录制命令","id":"7-录制命令","depth":2,"charIndex":4033},{"text":"参数说明","id":"参数说明-9","depth":4,"charIndex":4043},{"text":"8. 视频处理","id":"8-视频处理","depth":2,"charIndex":4364},{"text":"8.1 视频转码","id":"81-视频转码","depth":3,"charIndex":4375},{"text":"8.2 抽取视频流","id":"82-抽取视频流","depth":3,"charIndex":4389},{"text":"8.2 视频压缩","id":"82-视频压缩","depth":3,"charIndex":4475},{"text":"8.2 视频速率调整","id":"82-视频速率调整","depth":3,"charIndex":4575},{"text":"8.3 视频裁剪","id":"83-视频裁剪","depth":3,"charIndex":4662},{"text":"8.4 视频翻转","id":"84-视频翻转","depth":3,"charIndex":4911},{"text":"8.5 视频截图","id":"85-视频截图","depth":3,"charIndex":4963},{"text":"8.6 去除水印","id":"86-去除水印","depth":3,"charIndex":5051},{"text":"8.7 添加水印","id":"87-添加水印","depth":3,"charIndex":5065},{"text":"8.8 添加字幕","id":"88-添加字幕","depth":3,"charIndex":5146},{"text":"8.9 添加thumbnail，文件管理时看到的封面","id":"89-添加thumbnail文件管理时看到的封面","depth":3,"charIndex":5189},{"text":"","id":"","depth":2,"charIndex":5250},{"text":"9. 下载命令","id":"9-下载命令","depth":2,"charIndex":5254},{"text":"参数说明","id":"参数说明-10","depth":4,"charIndex":5264}],"domain":"","frontmatter":{"layout":"post","title":"ffmpeg 是一个命令行音视频后期处理软件","date":"2024-02-24T16:30:00.000Z","categories":["音视频"],"tags":["ffmpeg","ffplay"]},"version":""}]