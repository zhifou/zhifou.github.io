/*! For license information please see 926.2b5ffc1e.js.LICENSE.txt */
(self.webpackChunk_zhifou_rspress_blog=self.webpackChunk_zhifou_rspress_blog||[]).push([["926"],{39303:function(e,n,i){"use strict";i.r(n);var a=i("35250"),s=i("51325");function r(e){let n=Object.assign({h2:"h2",a:"a",h4:"h4",ul:"ul",li:"li",strong:"strong",p:"p",pre:"pre",code:"code",h3:"h3"},(0,s.useMDXComponents)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h2,{id:"ffmpeg-\u662F\u4E00\u4E2A\u547D\u4EE4\u884C\u97F3\u89C6\u9891\u540E\u671F\u5904\u7406\u8F6F\u4EF6",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ffmpeg-\u662F\u4E00\u4E2A\u547D\u4EE4\u884C\u97F3\u89C6\u9891\u540E\u671F\u5904\u7406\u8F6F\u4EF6",children:"#"}),"ffmpeg \u662F\u4E00\u4E2A\u547D\u4EE4\u884C\u97F3\u89C6\u9891\u540E\u671F\u5904\u7406\u8F6F\u4EF6"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u5217\u8868",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u5217\u8868",children:"#"}),"\u53C2\u6570\u5217\u8868"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["-",(0,a.jsx)(n.strong,{children:"i"})," ",(0,a.jsx)(n.strong,{children:"input"}),"_file\uFF1A\u6307\u5B9A\u8F93\u5165\u6587\u4EF6\u7684\u8DEF\u5F84\u548C\u540D\u79F0\u3002\u793A\u4F8B\uFF1A-",(0,a.jsx)(n.strong,{children:"i"})," ",(0,a.jsx)(n.strong,{children:"input"}),".mp4"]}),"\n",(0,a.jsx)(n.li,{children:"-ss position\uFF1A\u6307\u5B9A\u4ECE\u8F93\u5165\u6587\u4EF6\u7684\u54EA\u4E2A\u65F6\u95F4\u4F4D\u7F6E\u5F00\u59CB\u5904\u7406\uFF0C\u683C\u5F0F\u4E3A HH:MM:SS.xxx\uFF08\u5C0F\u65F6:\u5206\u949F:\u79D2.\u6BEB\u79D2\uFF09\u3002\u793A\u4F8B\uFF1A-ss 00:01:30.500 \u8868\u793A\u4ECE 1 \u5206 30.5 \u79D2\u5F00\u59CB\u5904\u7406\u3002"}),"\n",(0,a.jsx)(n.li,{children:"-t duration\uFF1A\u6307\u5B9A\u5904\u7406\u7684\u6301\u7EED\u65F6\u95F4\uFF0C\u683C\u5F0F\u4E3A HH:MM:SS.xxx\uFF08\u5C0F\u65F6:\u5206\u949F:\u79D2.\u6BEB\u79D2\uFF09\u3002\u793A\u4F8B\uFF1A-t 00:00:45 \u8868\u793A\u5904\u7406 45 \u79D2\u7684\u5185\u5BB9\u3002"}),"\n",(0,a.jsx)(n.li,{children:'-vf filtergraph\uFF1A\u6307\u5B9A\u89C6\u9891\u8FC7\u6EE4\u5668\u56FE\u5F62\uFF0C\u7528\u4E8E\u5BF9\u89C6\u9891\u8FDB\u884C\u5404\u79CD\u5904\u7406\uFF0C\u5982\u8C03\u6574\u5927\u5C0F\u3001\u88C1\u526A\u3001\u65CB\u8F6C\u3001\u6EE4\u955C\u7B49\u3002\u793A\u4F8B\uFF1A-vf "scale=640:480" \u8868\u793A\u5C06\u89C6\u9891\u8C03\u6574\u4E3A 640x480 \u7684\u5927\u5C0F\u3002'}),"\n",(0,a.jsx)(n.li,{children:'-af filtergraph\uFF1A\u6307\u5B9A\u97F3\u9891\u8FC7\u6EE4\u5668\u56FE\u5F62\uFF0C\u7528\u4E8E\u5BF9\u97F3\u9891\u8FDB\u884C\u5404\u79CD\u5904\u7406\uFF0C\u5982\u97F3\u9891\u589E\u76CA\u3001\u964D\u566A\u3001\u6DF7\u97F3\u7B49\u3002\u793A\u4F8B\uFF1A-af "volume=2.0" \u8868\u793A\u5C06\u97F3\u9891\u589E\u76CA\u8C03\u6574\u4E3A\u539F\u6765\u7684 2 \u500D\u3002'}),"\n",(0,a.jsx)(n.li,{children:"-c:v codec\uFF1A\u6307\u5B9A\u89C6\u9891\u7F16\u89E3\u7801\u5668\u3002\u793A\u4F8B\uFF1A-c:v libx264 \u8868\u793A\u4F7F\u7528 libx264 \u7F16\u7801\u5668\u8FDB\u884C\u89C6\u9891\u7F16\u7801\u3002"}),"\n",(0,a.jsx)(n.li,{children:"-c:a codec\uFF1A\u6307\u5B9A\u97F3\u9891\u7F16\u89E3\u7801\u5668\u3002\u793A\u4F8B\uFF1A-c:a aac \u8868\u793A\u4F7F\u7528 AAC \u7F16\u7801\u5668\u8FDB\u884C\u97F3\u9891\u7F16\u7801\u3002"}),"\n",(0,a.jsx)(n.li,{children:"-b:v bitrate\uFF1A\u6307\u5B9A\u89C6\u9891\u7684\u6BD4\u7279\u7387\uFF0C\u5373\u89C6\u9891\u7684\u8D28\u91CF\u3002\u8F83\u9AD8\u7684\u6BD4\u7279\u7387\u901A\u5E38\u610F\u5473\u7740\u66F4\u597D\u7684\u89C6\u9891\u8D28\u91CF\uFF0C\u4F46\u6587\u4EF6\u5927\u5C0F\u4E5F\u4F1A\u589E\u52A0\u3002\u793A\u4F8B\uFF1A-b:v 1000k \u8868\u793A\u89C6\u9891\u6BD4\u7279\u7387\u4E3A 1000kbps\u3002"}),"\n",(0,a.jsx)(n.li,{children:"-b:a bitrate\uFF1A\u6307\u5B9A\u97F3\u9891\u7684\u6BD4\u7279\u7387\uFF0C\u5373\u97F3\u9891\u7684\u8D28\u91CF\u3002\u8F83\u9AD8\u7684\u6BD4\u7279\u7387\u901A\u5E38\u610F\u5473\u7740\u66F4\u597D\u7684\u97F3\u9891\u8D28\u91CF\uFF0C\u4F46\u6587\u4EF6\u5927\u5C0F\u4E5F\u4F1A\u589E\u52A0\u3002\u793A\u4F8B\uFF1A-b:a 128k \u8868\u793A\u97F3\u9891\u6BD4\u7279\u7387\u4E3A 128kbps\u3002"}),"\n",(0,a.jsx)(n.li,{children:"-r framerate\uFF1A\u6307\u5B9A\u89C6\u9891\u7684\u5E27\u7387\uFF0C\u5373\u6BCF\u79D2\u64AD\u653E\u7684\u753B\u9762\u6570\u91CF\u3002\u8F83\u9AD8\u7684\u5E27\u7387\u53EF\u4EE5\u83B7\u5F97\u66F4\u6D41\u7545\u7684\u89C6\u9891\uFF0C\u4F46\u4E5F\u4F1A\u589E\u52A0\u6587\u4EF6\u5927\u5C0F\u3002\u793A\u4F8B\uFF1A-r 30 \u8868\u793A\u89C6\u9891\u5E27\u7387\u4E3A 30 \u5E27\u6BCF\u79D2\u3002"}),"\n",(0,a.jsx)(n.li,{children:"-y \u4E0D\u8BE2\u95EE\u76F4\u63A5\u8986\u76D6\u539F\u6709\u7684\u540C\u540D\u6587\u4EF6"}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"1-\u88C1\u526A\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#1-\u88C1\u526A\u547D\u4EE4",children:"#"}),"1. \u88C1\u526A\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-i  input_file\uFF1A\u6307\u5B9A\u8F93\u5165\u6587\u4EF6\u7684\u8DEF\u5F84\u548C\u540D\u79F0\u3002\u793A\u4F8B\uFF1A-i  input.mp3"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-ss position\uFF1A\u6307\u5B9A\u4ECE\u8F93\u5165\u6587\u4EF6\u7684\u54EA\u4E2A\u65F6\u95F4\u4F4D\u7F6E\u5F00\u59CB\u5904\u7406\uFF0C\u683C\u5F0F\u4E3A HH:MM:SS.xxx\uFF08\u5C0F\u65F6:\u5206\u949F:\u79D2.\u6BEB\u79D2\uFF09\u3002\u793A\u4F8B\uFF1A-ss 00:01:30.500 \u8868\u793A\u4ECE 1 \u5206 30.5 \u79D2\u5F00\u59CB\u5904\u7406\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-t duration\uFF1A\u6307\u5B9A\u5904\u7406\u7684\u6301\u7EED\u65F6\u95F4\uFF0C\u683C\u5F0F\u4E3A HH:MM:SS.xxx\uFF08\u5C0F\u65F6:\u5206\u949F:\u79D2.\u6BEB\u79D2\uFF09\u3002\u793A\u4F8B\uFF1A-t 00:00:45 \u8868\u793A\u5904\u7406 45 \u79D2\u7684\u5185\u5BB9\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-to \u7EC8\u6B62\u70B9\u65F6\u95F4"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-c copy \u8868\u793A\u4E0D\u6539\u53D8\u97F3\u9891\u548C\u89C6\u9891\u7684\u7F16\u7801\u683C\u5F0F\uFF0C\u76F4\u63A5\u62F7\u8D1D\uFF0C\u63D0\u5347\u6548\u7387"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"output.mp3 \u4E3A\u5904\u7406\u7ED3\u679C\u6587\u4EF6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"ffmpeg -i input.mp3 -ss 00:00:xx -t 120 -y output.mp3\nffmpeg -i input.mp3 -ss 10 -t 230 output.mp3\nffmpeg -i test.mp3 -ss 00:01:30 -to 00:02:30 -c copy test_cut.mp3\n\n# \u622A\u53D6\u89C6\u9891\u7247\u6BB5\nffmpeg -i input.mp4 -ss 04:10 -t 16 -c copy -avoid_negative_ts make_zero output.mp4\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"2-\u5408\u6210\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#2-\u5408\u6210\u547D\u4EE4",children:"#"}),"2. \u5408\u6210\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h3,{id:"21-\u6DF7\u5408\u5408\u6210",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#21-\u6DF7\u5408\u5408\u6210",children:"#"}),"2.1 \u6DF7\u5408\u5408\u6210"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-1",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-1",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-i \u6587\u4EF6 1.mp3 \u548C 2.mp3 \u4E3A\u5F85\u5408\u6210\u7684\u4E24\u4E2A\u6E90\u6587\u4EF6"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-filter_complex \u8FC7\u6EE4\u5668\u53C2\u6570"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"amix=inputs \u914D\u7F6E\u8F93\u5165\u7684\u6574\u4F53\u6837\u672C\u6570"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"duration\uFF0Cfirst\uFF1A\u957F\u5EA6\u53D6\u51B3\u4E8E\u7B2C\u4E00\u4E2A\u6587\u4EF6\uFF0Clongest\uFF1A\u957F\u5EA6\u53D6\u51B3\u4E8E\u65F6\u95F4\u6700\u957F\u6587\u4EF6\uFF0Cshortest\uFF1A\u957F\u5EA6\u53D6\u51B3\u4E8E\u65F6\u95F4\u6700\u77ED\u6587\u4EF6"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"dropout_transition\uFF1A\u8F93\u5165\u6D41\u7ED3\u675F\u65F6\u7528\u4E8E\u4F53\u79EF\u91CD\u65B0\u89C4\u8303\u5316\u7684\u8FC7\u6E21\u65F6\u95F4"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-f mp3 \u8BBE\u7F6E\u5BFC\u51FA\u6587\u4EF6\u683C\u5F0F"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"ffmpeg -i 1.mp3 -i 2.mp3 -filter_complex amix=inputs=2:duration=first:dropout_transition=2 -f mp3 remix.mp3\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"22-\u8FDE\u63A5\u5408\u6210",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#22-\u8FDE\u63A5\u5408\u6210",children:"#"}),"2.2 \u8FDE\u63A5\u5408\u6210"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-2",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-2",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"concat \u5408\u5E76\u6587\u4EF6\u6307\u4EE4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i "concat:Box01.mp3|Box02.mp3" Box.mp3\nffmpeg -i "concat:headerNew.mp3|006.mp3" -acodec copy demo6.mp3\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"\u4F7F\u7528txt\u6587\u4EF6\u96C6\u5408concat\u5408\u5E76\uFF0C\u89C6\u9891\u5408\u5E76\u4F7F\u7528\u8FD9\u4E2Alist\u5408\u5E76\u65B9\u5F0F"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u5C06\u4E24\u4E2A flv \u6587\u4EF6\u5408\u5E76\nffmpeg -f concat -i videolist.txt -c copy output.flv\nffmpeg -f concat -safe 0 -i list.txt -c copy output-he.mp4\n\n## input.txt \u4E2D\u7684\u5185\u5BB9\nfile 'xj1.flv'\nfile 'xj2.flv'\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"23-\u6DE1\u51FA\u6548\u679C",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#23-\u6DE1\u51FA\u6548\u679C",children:"#"}),"2.3 \u6DE1\u51FA\u6548\u679C"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-3",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-3",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"afade \u6DE1\u5165\u6DE1\u51FA\u6307\u4EE4"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"\u4ECE st \u79D2\u5F00\u59CB\uFF0C\u7ECF\u8FC7 d \u79D2\u949F\u7684\u6DE1\u51FA\u6548\u679C"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"ffmpeg -i bgm3.mp3  -filter_complex afade=t=out:st=16:d=4 bgm31.mp3\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"24-\u5408\u5E76\u97F3\u9891",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#24-\u5408\u5E76\u97F3\u9891",children:"#"}),"2.4 \u5408\u5E76\u97F3\u9891"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-4",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i output.mp3 -i output_dvolume.mp3 -filter_complex "[0:a][1:a]concat=n=2:v=0:a=1[out]" -map "[out]" merge_output.mp3\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"25-\u5408\u5E76\u89C6\u9891",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#25-\u5408\u5E76\u89C6\u9891",children:"#"}),"2.5 \u5408\u5E76\u89C6\u9891"]}),"\n",(0,a.jsx)(n.p,{children:"\u9996\u5148\u9700\u8981\u5C06\u539F\u89C6\u9891\u7684\u58F0\u97F3\u5220\u9664\u3002\u8FD9\u91CC\u7684\u6587\u4EF6\u540D\u9700\u8981\u52A0\u4E0A\u82F1\u6587\u5F15\u53F7\uFF0C\u5982\u679C\u4E0D\u52A0\u7684\u8BDD\uFF0C\u4F1A\u63D0\u793ANo such file or directory\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i "audio.mp4" -y -f mp4 -an -codec copy -q:v 1 "audio-\u65E0\u58F0.mp4"\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u7136\u540E\u5C06\u65E0\u58F0\u89C6\u9891\u548C\u97F3\u9891\u878D\u5408"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"ffmpeg -i audio-\u65E0\u58F0.mp4 -i accompaniment.wav -c:v copy -c:a aac -strict experimental audio-\u6D88\u97F3.mp4\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5373\u53EF\u83B7\u5F97\u6D88\u53BB\u4EBA\u58F0\u7684\u89C6\u9891\u3002\u4F46\u7B14\u8005\u53E3\u8BED\u4E0D\u597D\uFF0C\u89C9\u5F97\u539F\u89C6\u9891\u7684\u8BED\u901F\u6709\u4E9B\u5FEB\u4E86\uFF0C\u6545\u53C8\u8C03\u6574\u4E86\u89C6\u9891\u500D\u901F\u4E3A0.8\u500D\u901F\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i test.mp4 -filter_complex "[0:v]setpts=10/8*PTS[v];[0:a]atempo=0.8[a]" -map "[v]" -map "[a]" test-2.mp4\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u8FD9\u6761\u6307\u4EE4\u540C\u65F6\u8C03\u6574\u89C6\u9891\u500D\u901F\u548C\u97F3\u9891\u500D\u901F\uFF0Csetpts=(\u500D\u901F\u7684\u5012\u6570)*PTS[v]\uFF0Catempo=(\u500D\u901F)[a]"}),"\n",(0,a.jsxs)(n.h3,{id:"26-\u6DFB\u52A0\u6C34\u5370",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#26-\u6DFB\u52A0\u6C34\u5370",children:"#"}),"2.6 \u6DFB\u52A0\u6C34\u5370"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u5728\u5DE6\u4E0A\u89D20,0\u70B9\u6DFB\u52A0\u6C34\u5370\nffmpeg -y -i tmp.mp4 -i green.png -filter_complex 'overlay=x=0:y=0' output.mp4\n\n# \u4F7F\u7528\u534E\u6587\u884C\u6977\u5B57\u4F53\uFF0C64\u5B57\u53F7\uFF0C\u7EA2\u8272\u5B57\uFF0C\u5728\u53F3\u4E0A\u89D2\u5199\u6C34\u5370\u6587\u5B57\uFF0Cmain_w-text_w-10 \u5C31\u662F\u89C6\u9891\u5BBD\u5EA6\u51CF\u6587\u5B57\u5BBD\u5EA6\u518D\u51CF 10\nffmpeg -y -i source.mp4 -vf \"drawtext=fontfile=STXINGKA.ttf: text='\u6C34\u5370\u6587\u5B57':x=main_w-text_w-10:y=10:fontsize=64:fontcolor=red:shadowy=2\" output.mp4\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"27-\u62A0\u50CF\u5408\u5E76",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#27-\u62A0\u50CF\u5408\u5E76",children:"#"}),"2.7 \u62A0\u50CF\u5408\u5E76"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'-vf filtergraph\uFF1A\u6307\u5B9A\u89C6\u9891\u8FC7\u6EE4\u5668\u56FE\u5F62\uFF0C\u7528\u4E8E\u5BF9\u89C6\u9891\u8FDB\u884C\u5404\u79CD\u5904\u7406\uFF0C\u5982\u8C03\u6574\u5927\u5C0F\u3001\u88C1\u526A\u3001\u65CB\u8F6C\u3001\u6EE4\u955C\u7B49\u3002\u793A\u4F8B\uFF1A-vf "scale=640:480" \u8868\u793A\u5C06\u89C6\u9891\u8C03\u6574\u4E3A 640x480 \u7684\u5927\u5C0F\u3002'}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'# \u7EFF\u5E55\u62A0\u50CF\u540E\u5408\u5E76\nffmpeg -i jmfst.mp4 -i greentiger.mp4 -shortest -filter_complex "[1:v]chromakey=0x16ff0a:0.1:0.0[ckout];[0:v][ckout]overlay[out]" -map "[out]" -y output.mp4\n\n# \u57FA\u4E8E mask \u62A0\u50CF\u540E\u5408\u5E76\nffmpeg -i video.mp4 -i matte.mp4 -i background.mp4 -filter_complex \'[1][0]scale2ref[mask][main];[main][mask]alphamerge[vid];[2:v][vid]overlay[out]\' -map [out] complete.mp4\n'})}),"\n",(0,a.jsxs)(n.h2,{id:"3-\u8F6C\u6362\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#3-\u8F6C\u6362\u547D\u4EE4",children:"#"}),"3. \u8F6C\u6362\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h3,{id:"31-\u683C\u5F0F\u8F6C\u6362",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#31-\u683C\u5F0F\u8F6C\u6362",children:"#"}),"3.1 \u683C\u5F0F\u8F6C\u6362"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-5",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-5",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-i \u6587\u4EF6\uFF0Ca.mp3 \u4E3A\u5F85\u5904\u7406\u6E90\u6587\u4EF6"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-ar \u97F3\u9891\u62BD\u6837\u7387"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-ac \u97F3\u9891Channel\u6570"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-f \u5F3A\u5236\u8F93\u51FA\u683C\u5F0F \u4F8B\u5982mp3, wav\u7B49"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u5C06a.mp3\u8F6C\u5316\u7A0Ba.wav\uFF0C\u8BBE\u5B9A\u62BD\u6837\u7387\u4E3A16000\nffmpeg -i a.mp3 -ar 16000 -ac 1 a.wav\n\n# \u5C06Frozen.mka\u8F6C\u5316\u6210a.mp3\nffmpeg -i Frozen.mka -ar 16000 -f mp3 a.mp3\n\n# \u5C06\u56FE\u7247\u8F6C\u4E3A\u89C6\u9891\nffmpeg -loop 1 -f image2 -i test2.png -vcodec libx264 -r 30 -t 3 test2.mp4\n\n# \u66FF\u6362\u89C6\u9891\u4E2D\u7684\u97F3\u9891\u8F68\nffmpeg -i input.mp4 -i trll.mp3 -map 0:v -map 1:a -c:v copy -shortest -y output.mp4\n\n# \u5C06wav\u6587\u4EF6\u8F6C\u4E3Amp3\u6587\u4EF6\nffmpeg -i output.wav -c:a libmp3lame output.mp3\n\n# \u5C06mp3\u6587\u4EF6\u8F6C\u4E3Aaac\u6587\u4EF6\nffmpeg -i input.mp3 -acodec aac -strict experimental -y output.aac\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"32-\u56FE\u7247\u683C\u5F0F\u8F6C\u6362",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#32-\u56FE\u7247\u683C\u5F0F\u8F6C\u6362",children:"#"}),"3.2 \u56FE\u7247\u683C\u5F0F\u8F6C\u6362"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"ffmpeg -i input.bmp out.jpg\nffmpeg -i input.bmp out.png\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"4-\u8C03\u6574\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#4-\u8C03\u6574\u547D\u4EE4",children:"#"}),"4. \u8C03\u6574\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h3,{id:"41-\u97F3\u91CF\u8C03\u6574",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#41-\u97F3\u91CF\u8C03\u6574",children:"#"}),"4.1 \u97F3\u91CF\u8C03\u6574"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-6",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-6",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-i \u6587\u4EF6\uFF0Cinput.mp3 \u4E3A\u5F85\u5904\u7406\u6E90\u6587\u4EF6"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:'-af filtergraph\uFF1A\u6307\u5B9A\u97F3\u9891\u8FC7\u6EE4\u5668\u56FE\u5F62\uFF0C\u7528\u4E8E\u5BF9\u97F3\u9891\u8FDB\u884C\u5404\u79CD\u5904\u7406\uFF0C\u5982\u97F3\u9891\u589E\u76CA\u3001\u964D\u566A\u3001\u6DF7\u97F3\u7B49\u3002\u793A\u4F8B\uFF1A-af "volume=2.0" \u8868\u793A\u5C06\u97F3\u9891\u589E\u76CA\u8C03\u6574\u4E3A\u539F\u6765\u7684 2 \u500D\u3002'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u97F3\u91CF256\u4E3A\u539F\u59CB\u97F3\u91CF\uFF0C\u5982\u679C\u8981\u8C03\u6574\u5230\u4E24\u500D\u97F3\u91CF\uFF0C\u5219\u8BBE\u7F6E\u4E3A512\uFF0C\u8C03\u6574\u5230\u4E00\u534A\u97F3\u91CF\uFF0C\u5219\u8BBE\u4E3A128\uFF0C\u4E0B\u9762\u4E3A\u51CF\u5C0F\u4E00\u534A\u97F3\u91CF\u7684\u547D\u4EE4\nffmpeg -i input.mp3 -vol 128 output.mp3\n\n# \u4F7F\u7528dB\u8C03\u6574\u97F3\u91CF\nffmpeg -i input.mp3 -af volume=-20dB output.mp3\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"dB\u7684\u6362\u7B97\u516C\u5F0F"}),"\n1.1 dB = 1.1 \u500D\uFF0C2 dB = 1.25\u500D\uFF0C3 dB = 1.4\u500D\uFF0C6 dB = 2 \u500D\uFF0C10 dB = 3 \u500D\uFF0C20 dB = 10 \u500D\uFF0C30 dB = 30 \u500D\u3002\u5176\u5B83\u5C31\u53EF\u4EE5\u7528\u4E0A\u8FF0\u6570\u503C\u6362\u7B97\uFF0C\u5E76\u4E0D\u56F0\u96BE\u3002(\u53CD\u8FC7\u6765 \u2013 6 dB \u5C31\u662F 1/2 = 0.5)\n2.\u5728\u6362\u7B97\u65F6\u8981\u628A\u63E1\u4E00\u4E2A\u539F\u5219\uFF0CdB\u6570\u503C\u7684\u76F8\u52A0 \u7B49\u4E8E \u500D\u6570\u7684\u76F8\u4E58\u3002\n\u4F8B\u5982\uFF1A40 dB = 20dB + 20 dB = 10 * 10 = 100 \u500D\n-20dB\u8C31\u5BBD\u5C31\u662F\u4FE1\u53F7\u8870\u51CF\u5230\u5341\u5206\u4E4B\u4E00\u65F6\u7684\u9891\u8C31\u5E26\u5BBD\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"42-\u5347\u964D\u8C03",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#42-\u5347\u964D\u8C03",children:"#"}),"4.2 \u5347\u964D\u8C03"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'# \u5347\u534A\u97F3\nffmpeg -i "mine.mkv" -filter_complex "asetrate=48000*2^(1/12),atempo=1/2^(1/12)" "output.mkv"\n# \u5347\u5168\u97F3\nffmpeg -i "mine.mkv" -filter_complex "asetrate=48000*2^(2/12),atempo=1/2^(2/12)" "output.mkv"\n# \u964D\u534A\u97F3\nffmpeg -i "mine.mkv" -filter_complex "asetrate=48000*2^(-1/12),atempo=1/2^(-1/12)" "output.mkv"\n# \u964D\u5168\u97F3\nffmpeg -i "mine.mkv" -filter_complex "asetrate=48000*2^(-2/12),atempo=1/2^(-2/12)" "output.mkv"\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"43-\u97F3\u9891\u901F\u7387\u8C03\u6574",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#43-\u97F3\u9891\u901F\u7387\u8C03\u6574",children:"#"}),"4.3 \u97F3\u9891\u901F\u7387\u8C03\u6574"]}),"\n",(0,a.jsx)(n.p,{children:"\u6539\u53D8\u97F3\u9891\u901F\u7387\u6700\u7B80\u5355\u7684\u65B9\u6CD5\u662F\u76F4\u63A5\u8C03\u6574\u97F3\u9891\u7684\u91C7\u6837\u7387\uFF0C\u4F46\u662F\u4E0E\u6B64\u540C\u65F6\uFF0C\u8FD9\u79CD\u65B9\u6CD5\u4F1A\u6539\u53D8\u97F3\u9891\u7684\u97F3\u8272\u3002\u76EE\u524D\u4E00\u822C\u91C7\u7528\u5BF9\u539F\u97F3\u8FDB\u884C\u91CD\u91C7\u6837\uFF0C\u5DEE\u503C\u7B49\u65B9\u6CD5\u6765\u5B9E\u73B0\u3002\u4E0B\u9762\u8FD9\u884C\u547D\u4EE4\u7684\u500D\u7387\u8C03\u6574\u8303\u56F4\u4E3A0.5\u52302\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i input.mkv -filter:a "atempo=2.0" -vn output.mkv\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679C\u60F3\u8981\u518D\u5FEB\u7684\u8BDD\uFF0C\u9700\u8981\u66F4\u6539\u547D\u4EE4\uFF0C\u901A\u8FC7\u5C06\u591A\u4E2Aatempo\u8FC7\u6EE4\u5668\u4E32\u63A5\u5728\u4E00\u8D77\u6765\u7ED5\u8FC7\u8FD9\u4E2A\u9650\u5236\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i input.mkv -filter:a "atempo=2.0,atempo=2.0" -vn output.mkv\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5C06\u5BF9\u8F93\u5165\u6587\u4EF6 test_cut.mp3 \u5E94\u7528\u97F3\u9891\u6548\u679C\uFF0C\u5305\u62EC\u52A0\u901F 2 \u500D(atempo)\u3001\u9AD8\u901A\u6EE4\u6CE2\u5668(highpass)\u548C\u4F4E\u901A\u6EE4\u6CE2\u5668(lowpass)\uFF0C\u5E76\u4FDD\u5B58\u4E3A test_cut_ahl.mp3"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i test_cut.mp3 -af "atempo=2.0, highpass=f=200, lowpass=f=3000" test_cut_ahl.mp3\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"44-\u89C6\u9891\u901F\u7387\u8C03\u6574",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#44-\u89C6\u9891\u901F\u7387\u8C03\u6574",children:"#"}),"4.4 \u89C6\u9891\u901F\u7387\u8C03\u6574"]}),"\n",(0,a.jsx)(n.p,{children:"\u6539\u53D8\u89C6\u9891\u7684\u64AD\u653E\u901F\u7387\u662F\u901A\u8FC7\u4FEE\u6539\u89C6\u9891\u7684\u8868\u793A\u65F6\u95F4\u6233\uFF08PTS\uFF09\u6765\u5B9E\u73B0\u7684\u3002\u4E3E\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\uFF0C\u5982\u679C\u5728\u65F6\u95F4\u62331\u548C2\u5904\u663E\u793A\u4E24\u4E2A\u8FDE\u7EED\u5E27\uFF0C\u6211\u4EEC\u60F3\u8981\u52A0\u5FEB\u89C6\u9891\u901F\u5EA6\uFF0C\u90A3\u4E48\u8FD9\u4E24\u4E2A\u65F6\u95F4\u6233\u9700\u8981\u5206\u522B\u53D8\u4E3A0.5\u548C1\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u5FC5\u987B\u628A\u4ED6\u4EEC\u4E58\u4EE50.5\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i input.mkv -r 16 -filter:v "setpts=0.5*PTS" output.mkv\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5BF9\u89C6\u9891\u8FDB\u884C\u52A0\u901F\u65F6\uFF0C\u4E3A\u4E86\u4E0D\u4E22\u5E27\uFF0C\u53EF\u4EE5\u5229\u7528-r \u53C2\u6570\u6307\u5B9A\u8F93\u51FA\u7684fps\u3002\n\u4E00\u822C\u6765\u8BF4\uFF0C\u89C6\u9891\u500D\u901F\u8FD8\u9700\u8981\u5C06\u89C6\u9891\u4E2D\u7684\u97F3\u9891\u4E5F\u4E00\u540C\u500D\u901F\uFF0C\u901A\u8FC7\u6DF7\u5408\u7684\u8FC7\u6EE4\u56FE\u5B9E\u73B0\uFF0C\u547D\u4EE4\u5982\u4E0B\uFF0C"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i input.mkv -filter_complex "[0:v]setpts=0.5*PTS[v];[0:a]atempo=2.0[a]" -map "[v]" -map "[a]" output.mkv\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"45-\u6DFB\u52A0\u5C01\u9762",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#45-\u6DFB\u52A0\u5C01\u9762",children:"#"}),"4.5 \u6DFB\u52A0\u5C01\u9762"]}),"\n",(0,a.jsx)(n.p,{children:"\u4ECE test.mp3 \u97F3\u9891\u6587\u4EF6\u4E2D\u63D0\u53D6\u97F3\u9891\u6D41\uFF0C\u5E76\u4ECE test.jpeg \u56FE\u50CF\u6587\u4EF6\u4E2D\u63D0\u53D6\u5C01\u9762\u56FE\u50CF\u3002\u7136\u540E\uFF0C\u5B83\u5C06\u4F7F\u7528-map \u9009\u9879\u5C06\u97F3\u9891\u6D41\u548C\u5C01\u9762\u56FE\u50CF\u6D41\u6620\u5C04\u5230\u8F93\u51FA\u6587\u4EF6\u3002-c copy \u9009\u9879\u7528\u4E8E\u76F4\u63A5\u590D\u5236\u97F3\u9891\u6D41\u548C\u5C01\u9762\u56FE\u50CF\u6D41\uFF0C\u800C\u4E0D\u8FDB\u884C\u91CD\u65B0\u7F16\u7801\u3002-id3v2_version 3 \u9009\u9879\u7528\u4E8E\u8BBE\u7F6E ID3 \u6807\u7B7E\u7248\u672C\u4E3A 3\uFF0C\u4EE5\u786E\u4FDD\u517C\u5BB9\u6027\u3002-metadata:s:v \u9009\u9879\u7528\u4E8E\u6307\u5B9A\u5C01\u9762\u56FE\u50CF\u7684\u5143\u6570\u636E\uFF0C\u5982\u6807\u9898\u548C\u6CE8\u91CA\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i test.mp3 -i test.jpeg -map 0 -map 1 -c copy -id3v2_version 3 -metadata:s:v title="Album cover" -metadata:s:v comment="Cover (Front)" test_cover.mp3\n'})}),"\n",(0,a.jsxs)(n.h2,{id:"5-\u63D0\u53D6\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#5-\u63D0\u53D6\u547D\u4EE4",children:"#"}),"5. \u63D0\u53D6\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h3,{id:"51-\u4ECE\u89C6\u9891\u4E2D\u63D0\u53D6\u97F3\u9891",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#51-\u4ECE\u89C6\u9891\u4E2D\u63D0\u53D6\u97F3\u9891",children:"#"}),"5.1 \u4ECE\u89C6\u9891\u4E2D\u63D0\u53D6\u97F3\u9891"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-7",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-7",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"-map \u63D0\u53D6\u89C6\u9891-\u97F3\u9891\u6D41\u7684\u5E8F\u53F7"}),"\n",(0,a.jsx)(n.li,{children:"-b:a \u7801\u7387 kb/s"}),"\n",(0,a.jsx)(n.li,{children:"-f \u5F3A\u5236\u8F93\u51FA\u683C\u5F0F \u4F8B\u5982mp3, wav\u7B49"}),"\n",(0,a.jsx)(n.li,{children:"-vn \u8868\u793A\u53BB\u9664\u89C6\u9891\u6D41\uFF0Cv \u4EE3\u8868\u89C6\u9891\uFF0Cn \u4EE3\u8868 no \u4E5F\u5C31\u662F\u65E0\u89C6\u9891\u7684\u610F\u601D"}),"\n",(0,a.jsx)(n.li,{children:"acodec: \u6307\u5B9A\u97F3\u9891\u7F16\u7801\u5668\uFF0Ccopy \u6307\u660E\u53EA\u62F7\u8D1D\uFF0C\u4E0D\u505A\u7F16\u89E3\u7801"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u4ECE\u89C6\u9891\u4E2D\u5BFC\u51FA\u97F3\u9891\nffmpeg -i input.mp4 output.mp3\n# \u4ECEfrozen.mkv\u4E2D\uFF0C\u63D0\u53D6\u97F3\u9891\u6587\u4EF6\uFF0C\u4FDD\u5B58\u4E3Aaudio.1.mp3\nffmpeg -i test.mp4 -vn test.mp3\nffmpeg -i frozen.mkv -map 0:1 -b:a 64k -f mp3 a.1.mp3\nffmpeg -i frozen.mp4 -q:a 0 -map a audio.mp3\nffmpeg -i frozen.mp4 -vn -codec copy audio.m4a\nffmpeg -i audio.m4a -y -acodec libmp3lame -aq 0 audio.mp3\nffmpeg -i input.mp4 -acodec copy -vn out.aac\n\n# \u63D0\u53D6\u97F3\u9891PCM\u6570\u636E\nffmpeg -i out.mp4 -vn -ar 44100 -ac 2 -f s16le out.pcm\n\n# \u64AD\u653E\u6D4B\u8BD5\nffplay -ar 44100 -ac 2 -f s16le -i out.pcm\n\n# PCM\u8F6CWAV\nffmpeg -f s16be -ar 8000 -ac 2 -acodec pcm_s16be -i input.raw output.wav\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u67E5\u770B\u89C6\u9891\uFF0C\u5305\u542B\u7684\u89C6\u9891\u6D41\u3001\u97F3\u9891\u6D41\u5982\u4E0B\uFF1A"}),"\nencoder         : libebml v1.2.3 + libmatroska v1.3.0\nDuration: 01:42:13.09, start: 0.000000, bitrate: 2954 kb/s\nStream #0:0: Video: h264 (High), yuv420p, 1024x576 [SAR 1:1 DAR 16:9], 23.98 fps\nStream #0:1(eng): Audio: ac3, 48000 Hz, 384 kb/s (default)  title           : \u82F1\u8BED\nStream #0:2(chi): Audio: ac3, 48000 Hz, 384 kb/s                  title           : \u53F0\u914D\nStream #0:3(chi): Audio: ac3, 48000 Hz, 384 kb/s                  title           : \u7CA4\u8BED"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"\u67E5\u770B\u539F\u97F3\u89C6\u9891\u6587\u4EF6\u97F3\u8F68\u9891\u7387"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i "mine.mkv"\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u547D\u4EE4\u6267\u884C\u540E\u627E\u5230\u97F3\u8F68\u7684Stream\uFF0C\u9891\u7387\u4E3A48000Hz\uFF1B"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:" Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 2316x1440, 22449 kb/s, 30 fps, 30 tbr, 600 tbn, 1200 tbc (default)\n    Metadata:\n      creation_time   : 2022-08-31T02:15:18.000000Z\n      handler_name    : Core Media Video\n      vendor_id       : [0][0][0][0]\n      encoder         : H.264\n  Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 2 kb/s (default)\n    Metadata:\n      creation_time   : 2022-08-31T02:15:18.000000Z\n      handler_name    : Core Media Audio\n      vendor_id       : [0][0][0][0]\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"52-\u63D0\u53D6yuv",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#52-\u63D0\u53D6yuv",children:"#"}),"5.2 \u63D0\u53D6YUV"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"-c:v rawvideo \u6307\u5B9A\u5C06\u89C6\u9891\u8F6C\u6210\u539F\u59CB\u6570\u636E"}),"\n",(0,a.jsx)(n.li,{children:"-pixel_format yuv420p \u6307\u5B9A\u8F6C\u6362\u683C\u5F0F\u4E3A yuv420p"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u4ECEmp4\u4E2D\u63D0\u53D6YUV\u6570\u636E\nffmpeg -i input.mp4 -an -c:v rawvideo -pixel_format yuv420p out.yuv\n\n# \u64AD\u653E\u6D4B\u8BD5\nffplay -s wxh out.yuv\n\n# \u89C6\u9891YUV\u8F6CH264\nffmpeg -f rawvideo -pix_fmt yuv420p -s 640x480 -r 30 -i out.yuv -c:v libx264 -f rawvideo out.h264\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"6-\u6D88\u97F3\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#6-\u6D88\u97F3\u547D\u4EE4",children:"#"}),"6. \u6D88\u97F3\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-8",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-8",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-i \u6587\u4EF6\uFF0Cinput.mp3 \u4E3A\u5F85\u5904\u7406\u6E90\u6587\u4EF6"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-ac \u97F3\u9891Channel\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg -i input.mp3 -af pan="stereo|c0=c0|c1=-1*c1" -ac 1 output.mp3\nffmpeg -i input.mp3 -af "pan=stereo|c0<c0+c1|c1<c0+c1" output.mp3\n\n# \u6D88\u9664\u89C6\u9891\u4E2D\u90E8\u4EFD\u58F0\u97F3\n# ffmpeg -i ad.mp4 -af "volume=enable=\'between(t,2,9)\':volume=0,volume=enable=\'between(t,15,20)\':volume=0" adb.mp4\nffmpeg -i ad.mp4 -af "volume=enable=\'between(t,2,9)\':volume=0" adb.mp4\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"7-\u5F55\u5236\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#7-\u5F55\u5236\u547D\u4EE4",children:"#"}),"7. \u5F55\u5236\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-9",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-9",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-f avfoundation \u8F93\u5165\u8BBE\u5907\uFF0C\u4ECE Mac \u7684\u97F3\u9891\u8F93\u5165\u8BBE\u5907\uFF08\u901A\u5E38\u662F\u9EA6\u514B\u98CE\uFF09\u5F55\u5236\u97F3\u9891"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-i \u6307\u5B9A\u4ECE\u54EA\u513F\u91C7\u96C6\u6570\u636E\uFF0C\u5B83\u662F\u4E00\u4E2A\u6587\u4EF6\u7D22\u5F15\u53F7\u3002\u5728\u6211\u7684\u7535\u8111\u4E0A\uFF0C1 \u4EE3\u8868\u684C\u9762\uFF08\u53EF\u4EE5\u901A\u8FC7\u4E0A\u9762\u7684\u547D\u4EE4\u67E5\u8BE2\u8BBE\u5907\u7D22\u5F15\u53F7\uFF09"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-r \u6307\u5B9A\u5E27\u7387\u3002\u6309 ffmpeg \u5B98\u65B9\u6587\u6863\u8BF4-r \u4E0E-framerate \u4F5C\u7528\u76F8\u540C\uFF0C\u4F46\u5B9E\u9645\u6D4B\u8BD5\u65F6\u53D1\u73B0\u4E0D\u540C\u3002-framerate \u7528\u4E8E\u9650\u5236\u8F93\u5165\uFF0C\u800C-r \u7528\u4E8E\u9650\u5236\u8F93\u51FA\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-framerate \u9650\u5236\u89C6\u9891\u7684\u91C7\u96C6\u5E27\u7387\u3002\u8FD9\u4E2A\u5FC5\u987B\u8981\u6839\u636E\u63D0\u793A\u8981\u6C42\u8FDB\u884C\u8BBE\u7F6E\uFF0C\u5982\u679C\u4E0D\u8BBE\u7F6E\u5C31\u4F1A\u62A5\u9519\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:'":0" \u53C2\u6570\u8868\u793A\u9ED8\u8BA4\u7684\u97F3\u9891\u8F93\u5165\u8BBE\u5907'}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:'"1:0" \u53C2\u6570\u8868\u793A"\u89C6\u9891\u8F93\u5165\u8BBE\u5907:\u97F3\u9891\u8F93\u5165\u8BBE\u5907"'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'# \u67E5\u8BE2\u5F55\u5236\u8BBE\u5907\nffmpeg -f avfoundation -list_devices true -i ""\n\n# \u5F55\u5236\u97F3\u9891\nffmpeg -f avfoundation -i ":0" output.wav\n\n# \u5F55\u5236\u97F3\u9891\u88F8\u6570\u636E\nffmpeg -f avfoundation -i :0 -ar 44100 -f s16le out.pcm\n\n# \u5F55\u5236\u89C6\u9891\nffmpeg -f avfoundation -i "1:0" out.avi\nffmpeg -framerate 30 -f avfoundation -i 0 out.mp4\n\n# \u89C6\u9891+\u97F3\u9891\nffmpeg -framerate 30 -f avfoundation -i 0:0 out.mp4\n\n# \u5F55\u5C4F\nffmpeg -f avfoundation -i 1 -r 30 out.yuv\n\n# \u5F55\u5C4F+\u58F0\u97F3\nffmpeg -f avfoundation -i 1:0 -r 29.97 -c:v libx264 -crf 0 -c:a libfdk_aac -profile:a aac_he_v2 -b:a 48k out.flv\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"8-\u89C6\u9891\u5904\u7406",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#8-\u89C6\u9891\u5904\u7406",children:"#"}),"8. \u89C6\u9891\u5904\u7406"]}),"\n",(0,a.jsxs)(n.h3,{id:"81-\u89C6\u9891\u8F6C\u7801",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#81-\u89C6\u9891\u8F6C\u7801",children:"#"}),"8.1 \u89C6\u9891\u8F6C\u7801"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"ffmpeg -i input.avi output.mp4\nffmpeg -i input.mp4 -vcodec copy -acodec copy output.flv\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"82-\u62BD\u53D6\u89C6\u9891\u6D41",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#82-\u62BD\u53D6\u89C6\u9891\u6D41",children:"#"}),"8.2 \u62BD\u53D6\u89C6\u9891\u6D41"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"vcodec: \u6307\u5B9A\u89C6\u9891\u7F16\u7801\u5668\uFF0Ccopy \u6307\u660E\u53EA\u62F7\u8D1D\uFF0C\u4E0D\u505A\u7F16\u89E3\u7801\u3002"}),"\n",(0,a.jsx)(n.li,{children:"an: a \u4EE3\u8868\u89C6\u9891\uFF0Cn \u4EE3\u8868 no \u4E5F\u5C31\u662F\u65E0\u97F3\u9891\u7684\u610F\u601D\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"ffmpeg -i input.mp4 -vcodec copy -an out.h264\n\nffmpeg -i input.mp4 -vcodec copy -an output.mp4\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"82-\u89C6\u9891\u538B\u7F29",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#82-\u89C6\u9891\u538B\u7F29",children:"#"}),"8.2 \u89C6\u9891\u538B\u7F29"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"-b:v \u89C6\u9891\u7801\u7387\u8BBE\u7F6E"}),"\n",(0,a.jsx)(n.li,{children:"-vf scale \u6307\u5B9A\u4F7F\u7528\u7B80\u5355\u8FC7\u6EE4\u5668 scale\uFF0Ciw/2:-1 \u4E2D\u7684 iw \u6307\u5B9A\u6309\u6574\u578B\u53D6\u89C6\u9891\u7684\u5BBD\u5EA6\u3002-1\u8868\u793A\u9AD8\u5EA6\u968F\u5BBD\u5EA6\u4E00\u8D77\u53D8\u5316\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u538B\u7F29\u7684\u6587\u4EF6\u66F4\u5927\u66F4\u6E05\u6670\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\u4E0D\u7528\nffmpeg -i test_ffmpeg.mp4\n\n# \u51CF\u5C0F\u89C6\u9891\u7801\u7387\uFF0C\u538B\u7F29\u7684\u66F4\u6A21\u7CCA\nffmpeg -i out.MP4 -b:v 500k 512k_out.mp4\n\n# \u901A\u8FC7scale\u7F29\u653E\u89C6\u9891\nfmpeg -i input.mp4 -vf scale=iw/2:-1 output.mp4\nffmpeg -i input.mpg -vf scale=iw/2:ih/2 output.mp4\nffmpeg -i input.mpg -vf scale=iw*0.9:ih*0.9 output.mp4\n# \u7528\u9EC4\u91D1\u6BD4\u4F8B\u7F29\u653E\u8F93\u5165\u503C= 1.61803398874989484820\nffmpeg -i input.mpg -vf scale=iw/PHI:ih/PHI output.mp4\n\n# \u964D\u4F4E\u89C6\u9891\u7684\u5206\u8FA8\u7387\u4E14\u8F6C\u6362\u89C6\u9891\u683C\u5F0F\nffmpeg -i input.avi -vf scale=640:360 out.mp4\n\n# \u97F3\u89C6\u9891\u5408\u5E76\uFF0C\u4ECE\u4F7F\u7528\u770B.h264\u683C\u5F0F\u7684\u89C6\u9891\u4F1A\u51FA\u73B0\u6296\u52A8\u73B0\u8C61\nffmpeg -i out.h264 -i out.aac -vcodec copy -acodec copy out.mp4\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"82-\u89C6\u9891\u901F\u7387\u8C03\u6574",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#82-\u89C6\u9891\u901F\u7387\u8C03\u6574",children:"#"}),"8.2 \u89C6\u9891\u901F\u7387\u8C03\u6574"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"-vf scale \u6307\u5B9A\u4F7F\u7528\u7B80\u5355\u8FC7\u6EE4\u5668 scale\uFF0Ciw/2:-1 \u4E2D\u7684 iw \u6307\u5B9A\u6309\u6574\u578B\u53D6\u89C6\u9891\u7684\u5BBD\u5EA6\u3002-1\u8868\u793A\u9AD8\u5EA6\u968F\u5BBD\u5EA6\u4E00\u8D77\u53D8\u5316\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u628A\u89C6\u9891\u7684\u5E27\u901F\u7387\u53D8\u4E3A0.98\u500D\uFF0C\u53D8\u6162\u4E86\nffmpeg -i input.mp4 -vf setpts=PTS/0.98 -af atempo=2 output-3.mp4\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"83-\u89C6\u9891\u88C1\u526A",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#83-\u89C6\u9891\u88C1\u526A",children:"#"}),"8.3 \u89C6\u9891\u88C1\u526A"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"crop \u683C\u5F0F\uFF1Acrop=w:h:x :y"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"w: \u8F93\u51FA\u7684\u5BBD\u5EA6\u3002\u53EF\u4EE5\u4F7F\u7528 in_w \u8868\u5F0F\u8F93\u5165\u89C6\u9891\u7684\u5BBD\u5EA6\u3002"}),"\n",(0,a.jsx)(n.li,{children:"h: \u8F93\u51FA\u7684\u9AD8\u5EA6\u3002\u53EF\u4EE5\u4F7F\u7528 in_h \u8868\u5F0F\u8F93\u5165\u89C6\u9891\u7684\u9AD8\u5EA6\u3002"}),"\n",(0,a.jsx)(n.li,{children:"x : X \u5750\u6807"}),"\n",(0,a.jsx)(n.li,{children:"y : Y \u5750\u6807"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679C x \u548C y \u8BBE\u7F6E\u4E3A 0,\u8BF4\u660E\u4ECE\u5DE6\u4E0A\u89D2\u5F00\u59CB\u88C1\u526A\u3002\u5982\u679C\u4E0D\u5199\u662F\u4ECE\u4E2D\u5FC3\u70B9\u88C1\u526A\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-strict -2 \u6307\u660E\u97F3\u9891\u4F7F\u6709 AAC"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-f hls \u8F6C\u6210 m3u8 \u683C\u5F0F"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-vf \u89C6\u9891\u8FC7\u6EE4"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'# \u57FA\u672C\u7684\u88C1\u526A\u8FC7\u6EE4\u5668\nffmpeg -i input.mp4 -vf "crop=w:h:x:y" output.mp4\n\n# \u8F93\u5165\u89C6\u9891\u88C1\u526A\u4E3A 640x480 \u50CF\u7D20\uFF0C\u5F53\u4E0D\u6307\u5B9A\u4F4D\u7F6E\u65F6x:y\uFF0CFFmpeg \u4F1A\u81EA\u52A8\u4ECE\u4E2D\u5FC3\u88C1\u526A\u8F93\u5165\u89C6\u9891\nffmpeg -i input.mp4 -vf "crop=640:480" output.mp4\n\n# \u6309\u7167\u5C3A\u5BF8\u548C\u672A\u77E5\u88C1\u526A\u89C6\u9891\nffmpeg -i input.mov  -vf crop=in_w-300:in_h-200 -c:v libx264 -c:a copy -video_size 1280x720 output.mp4\n\n# \u6709\u65F6\uFF0C\u89C6\u9891\u5468\u56F4\u4F1A\u6709\u9ED1\u8272\u8FB9\u6846\u4EE5\u9002\u5E94\u5BBD\u9AD8\u6BD4\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528\u201C cropDetect \u201D\u8FC7\u6EE4\u5668\u6765\u81EA\u52A8\u68C0\u6D4B\u88C1\u526A\u5C3A\u5BF8\u548C\u4F4D\u7F6E\u3002\u6EE4\u955C\u5C06\u68C0\u6D4B\u8F93\u5165\u89C6\u9891\u7684\u975E\u9ED1\u8272\u533A\u57DF\uFF0C\u7136\u540E\u8BA1\u7B97\u5E76\u6253\u5370\u5EFA\u8BAE\u7684\u88C1\u526A\u5C3A\u5BF8\u548C\u4F4D\u7F6E\nffmpeg -i input.mp4 -vf cropdetect -f null - 2>&1 | awk \'/crop/ { print $NF }\' | tail -1\n\n# HLS\u5207\u7247\uFF0C\u5236\u4F5Cm3u8\u683C\u5F0F\nffmpeg -i input.mp4 -c:v libx264 -c:a libfdk_aac -strict -2 -f hls  out.m3u8\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"84-\u89C6\u9891\u7FFB\u8F6C",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#84-\u89C6\u9891\u7FFB\u8F6C",children:"#"}),"8.4 \u89C6\u9891\u7FFB\u8F6C"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"hflip \u6C34\u5E73\u7FFB\u8F6C"}),"\n",(0,a.jsx)(n.li,{children:"\u5982\u679C\u8981\u4FEE\u6539\u4E3A\u5782\u76F4\u7FFB\u8F6C\u53EF\u4EE5\u7528 vflip"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'ffmpeg  -i input.mp4 -filter_complex "[0:v]pad=w=2*iw[a];[0:v]hflip[b];[a][b]overlay=x=w" output.mp4\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"85-\u89C6\u9891\u622A\u56FE",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#85-\u89C6\u9891\u622A\u56FE",children:"#"}),"8.5 \u89C6\u9891\u622A\u56FE"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u4ECE\u4E0A\u9762\u7684 out.mp4 \u4E2D\u63D0\u53D6\u7B2C 10 \u79D2\u7684\u89C6\u9891\u5E27\uFF0C\u5E76\u5C06\u5176\u4FDD\u5B58\u4E3A\u8F93\u51FA\u6587\u4EF6 output.jpg\u3002\u53C2\u6570-vframes 1\u8868\u793A\u53EA\u63D0\u53D6\u4E00\u5E27\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'# \u6309\u7167\u5E27\u4F4D\u7F6E\u63D0\u53D6\u56FE\u7247\nffmpeg -i input.mp4 -ss 00:00:10 -vframes 1 output.jpg\n\n# \u8BBE\u7F6E\u89C6\u9891\u5E27\u4E3A1\uFF0C\u4ECE\u4E2D\u62BD\u53D6\u56FE\u7247\nffmpeg -i input.mp4 -vf fps=1 %04d.png\n\n# \u5168\u89C6\u9891\u8F6C\u56FE\u7247\u96C6\u5408\nffmpeg -r 1 -i output-1.mp4 -r 1 images "images/$filename%03d.png"\n\n# \u56FE\u7247\u96C6\u5408\u8F6C\u89C6\u9891\nffmpeg -r 1/5 -i image2/%03d.png -c:v libx264 -vf fps=25 -pix_fmt yuv420p output.mp4\n\n# \u89C6\u9891\u8F6CGIF\uFF0C\u4ECE23\u79D2\u5F00\u59CB\uFF0C\u5411\u540E\u53D63.8\u79D2\uFF0C\u505A\u6210\u4E00\u4E2Agif\u56FE\u7247\nffmpeg -ss 23.0 -t 3.8 -i input.mp4 output_trimmed.gif\n\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"86-\u53BB\u9664\u6C34\u5370",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#86-\u53BB\u9664\u6C34\u5370",children:"#"}),"8.6 \u53BB\u9664\u6C34\u5370"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'# \u53BB\u9664\u89C6\u9891input.mp4\u4E2D\u4F4D\u7F6E\u5728\u5DE6\u4E0A\u89D2(160, 756)\uFF0C\u5BBD\u5EA6398\u9AD8\u5EA6108\u7684\u77E9\u5F62\u8303\u56F4\nffmpeg -i input.mp4 -filter_complex "delogo=x=160:y=756:w=398:h=108" output.mp4\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"87-\u6DFB\u52A0\u6C34\u5370",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#87-\u6DFB\u52A0\u6C34\u5370",children:"#"}),"8.7 \u6DFB\u52A0\u6C34\u5370"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"-vf \u4E2D\u7684 movie \u6307\u5B9A logo \u4F4D\u7F6E\u3002scale \u6307\u5B9A logo \u5927\u5C0F\u3002overlay \u6307\u5B9A logo \u6446\u653E\u7684\u4F4D\u7F6E"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:'# \u56FE\u7247\u6C34\u5370\nffmpeg -i out.mp4  -vf "movie=logo.png,scale=128:72[watermask];[in][watermask] overlay=96:54 [out]" water_img.mp4\n\n# \u628A\u56FE\u7247\u6C34\u5370\uFF0C\u653E\u5230\u5DE6\u4E0B\u89D2\uFF0Coverlay=0:(main_h-overlay_h)\nffmpeg -i input.mp4 -i watermark.png -filter_complex "[1][0]scale2ref=oh*mdar:ih*0.2[logo][video];[video][logo]overlay=0:(main_h-overlay_h)" output_bottom_left.mp4\n\n# \u6587\u5B57\u6C34\u5370\nffmpeg -i out.mp4 -vf "drawtext=fontfile=FZBaoHTJW_Xi.TTF: text=\'anyRTC\':x=128:y=72:fontsize=24:fontcolor=red:shadowy=2" water_text.mp4\n\n# \u7ED9GIF\u4E0A\u589E\u52A0\u6587\u5B57\nffmpeg -i input.gif -vf "drawtext=text=\'When my code works the first time\':fontsize=30:x=10:y=10:fontcolor=white:fontfile=C:/Windows/Fonts/Arial.ttf" output_font.gif\nffmpeg -i input.gif -vf "drawtext=text=\'When my code works \':fontsize=30:x=10:y=10:fontcolor=white,drawtext=text=\'the first time\':fontsize=30:x=10:y=(10+text_h):fontcolor=white" output_break.gif\n\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"88-\u6DFB\u52A0\u5B57\u5E55",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#88-\u6DFB\u52A0\u5B57\u5E55",children:"#"}),"8.8 \u6DFB\u52A0\u5B57\u5E55"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"-vf \u4E2D\u7684 subtitles\u6307\u5B9A\u5B57\u5E55\u6587\u4EF6\u4F4D\u7F6E"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u89C6\u9891\u6DFB\u52A0\u5B57\u5E55srt\nffmpeg -i video_test.mp4 -vf subtitles=subtitle.srt out_subtitle.mp4\n\n# \u89C6\u9891\u6DFB\u52A0\u97F3\u4E50+\u5B57\u5E55\nffmpeg -i video_test.mp4 -i audio_bg.mp3 -vf subtitles=all_mp3_srt.srt out_mp3_subtitle.mp4\n"})}),"\n",(0,a.jsxs)(n.h3,{id:"89-\u6DFB\u52A0thumbnail\u6587\u4EF6\u7BA1\u7406\u65F6\u770B\u5230\u7684\u5C01\u9762",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#89-\u6DFB\u52A0thumbnail\u6587\u4EF6\u7BA1\u7406\u65F6\u770B\u5230\u7684\u5C01\u9762",children:"#"}),"8.9 \u6DFB\u52A0thumbnail\uFF0C\u6587\u4EF6\u7BA1\u7406\u65F6\u770B\u5230\u7684\u5C01\u9762"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"-vf \u4E2D\u7684 subtitles\u6307\u5B9A\u5B57\u5E55\u6587\u4EF6\u4F4D\u7F6E"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u7ED9\u89C6\u9891\u6587\u4EF6\u6DFB\u52A0thumbnail\nffmpeg -i output-he.mp4 -i zhifou.png -map 1 -map 0 -c copy -disposition:0 attached_pic output.mp4\n"})}),"\n",(0,a.jsx)(n.h2,{id:"",children:(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#",children:"#"})}),"\n",(0,a.jsxs)(n.h2,{id:"9-\u4E0B\u8F7D\u547D\u4EE4",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#9-\u4E0B\u8F7D\u547D\u4EE4",children:"#"}),"9. \u4E0B\u8F7D\u547D\u4EE4"]}),"\n",(0,a.jsxs)(n.h4,{id:"\u53C2\u6570\u8BF4\u660E-10",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u53C2\u6570\u8BF4\u660E-10",children:"#"}),"\u53C2\u6570\u8BF4\u660E"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"-i \u6587\u4EF6\uFF0C\u5F85\u5904\u7406\u6E90\u6587\u4EF6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",meta:"",children:"# \u5C06\u5728\u7EBF flv \u6D41\u4FDD\u5B58\u5230\u672C\u5730\nffmpeg -i http://demo.com/input.flv -c copy dump.flv\n\n# \u5C06\u672C\u5730\u89C6\u9891\u4EE5 rtmp \u534F\u8BAE\u63A8\u6D41\nffmpeg -re -i ./demo.mp4 -c copy -f flv rtmp://publish.com/live/demo123456\n\n# m3u8\u89C6\u9891\u4E0B\u8F7D\nffmpeg -protocol_whitelist concat,file,http,https,tcp,tls,crypto  -i  \u4F60\u7684.m3u8 -c copy output.mp4\nffmpeg -protocol_whitelist concat,file,http,https,tcp,tls,crypto  -i  https://xxx.m3u8 -c copy output.mp4\n\n# \u5FEB\u624B\u89C6\u9891\u4E0B\u8F7D\n# \u76F4\u63A5\u4F7F\u7528Downie4\u4E0B\u8F7D\n\n# \u4F18\u9177\u89C6\u9891\u4E0B\u8F7D\n\n\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"\u63A8\u8350",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u63A8\u8350",children:"#"}),"\u63A8\u8350"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/FFmpeg/FFmpeg",target:"_blank",rel:"noopener noreferrer",children:"FFmpeg"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"http://zhifou.co/ffmpeg-intro",target:"_blank",rel:"noopener noreferrer",children:"\u77E5\u5426"})}),"\n"]}),"\n"]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.useMDXComponents)(),e.components);return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(r,e)})):r(e)}n.default=t,t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["..%2Fsource%2F_posts%2F2024-02-24-ffmpeg-intro.md"]={toc:[{id:"ffmpeg-\u662F\u4E00\u4E2A\u547D\u4EE4\u884C\u97F3\u89C6\u9891\u540E\u671F\u5904\u7406\u8F6F\u4EF6",text:"ffmpeg \u662F\u4E00\u4E2A\u547D\u4EE4\u884C\u97F3\u89C6\u9891\u540E\u671F\u5904\u7406\u8F6F\u4EF6",depth:2},{id:"\u53C2\u6570\u5217\u8868",text:"\u53C2\u6570\u5217\u8868",depth:4},{id:"1-\u88C1\u526A\u547D\u4EE4",text:"1. \u88C1\u526A\u547D\u4EE4",depth:2},{id:"\u53C2\u6570\u8BF4\u660E",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"2-\u5408\u6210\u547D\u4EE4",text:"2. \u5408\u6210\u547D\u4EE4",depth:2},{id:"21-\u6DF7\u5408\u5408\u6210",text:"2.1 \u6DF7\u5408\u5408\u6210",depth:3},{id:"\u53C2\u6570\u8BF4\u660E-1",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"22-\u8FDE\u63A5\u5408\u6210",text:"2.2 \u8FDE\u63A5\u5408\u6210",depth:3},{id:"\u53C2\u6570\u8BF4\u660E-2",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"23-\u6DE1\u51FA\u6548\u679C",text:"2.3 \u6DE1\u51FA\u6548\u679C",depth:3},{id:"\u53C2\u6570\u8BF4\u660E-3",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"24-\u5408\u5E76\u97F3\u9891",text:"2.4 \u5408\u5E76\u97F3\u9891",depth:3},{id:"\u53C2\u6570\u8BF4\u660E-4",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"25-\u5408\u5E76\u89C6\u9891",text:"2.5 \u5408\u5E76\u89C6\u9891",depth:3},{id:"26-\u6DFB\u52A0\u6C34\u5370",text:"2.6 \u6DFB\u52A0\u6C34\u5370",depth:3},{id:"27-\u62A0\u50CF\u5408\u5E76",text:"2.7 \u62A0\u50CF\u5408\u5E76",depth:3},{id:"3-\u8F6C\u6362\u547D\u4EE4",text:"3. \u8F6C\u6362\u547D\u4EE4",depth:2},{id:"31-\u683C\u5F0F\u8F6C\u6362",text:"3.1 \u683C\u5F0F\u8F6C\u6362",depth:3},{id:"\u53C2\u6570\u8BF4\u660E-5",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"32-\u56FE\u7247\u683C\u5F0F\u8F6C\u6362",text:"3.2 \u56FE\u7247\u683C\u5F0F\u8F6C\u6362",depth:3},{id:"4-\u8C03\u6574\u547D\u4EE4",text:"4. \u8C03\u6574\u547D\u4EE4",depth:2},{id:"41-\u97F3\u91CF\u8C03\u6574",text:"4.1 \u97F3\u91CF\u8C03\u6574",depth:3},{id:"\u53C2\u6570\u8BF4\u660E-6",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"42-\u5347\u964D\u8C03",text:"4.2 \u5347\u964D\u8C03",depth:3},{id:"43-\u97F3\u9891\u901F\u7387\u8C03\u6574",text:"4.3 \u97F3\u9891\u901F\u7387\u8C03\u6574",depth:3},{id:"44-\u89C6\u9891\u901F\u7387\u8C03\u6574",text:"4.4 \u89C6\u9891\u901F\u7387\u8C03\u6574",depth:3},{id:"45-\u6DFB\u52A0\u5C01\u9762",text:"4.5 \u6DFB\u52A0\u5C01\u9762",depth:3},{id:"5-\u63D0\u53D6\u547D\u4EE4",text:"5. \u63D0\u53D6\u547D\u4EE4",depth:2},{id:"51-\u4ECE\u89C6\u9891\u4E2D\u63D0\u53D6\u97F3\u9891",text:"5.1 \u4ECE\u89C6\u9891\u4E2D\u63D0\u53D6\u97F3\u9891",depth:3},{id:"\u53C2\u6570\u8BF4\u660E-7",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"52-\u63D0\u53D6yuv",text:"5.2 \u63D0\u53D6YUV",depth:3},{id:"6-\u6D88\u97F3\u547D\u4EE4",text:"6. \u6D88\u97F3\u547D\u4EE4",depth:2},{id:"\u53C2\u6570\u8BF4\u660E-8",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"7-\u5F55\u5236\u547D\u4EE4",text:"7. \u5F55\u5236\u547D\u4EE4",depth:2},{id:"\u53C2\u6570\u8BF4\u660E-9",text:"\u53C2\u6570\u8BF4\u660E",depth:4},{id:"8-\u89C6\u9891\u5904\u7406",text:"8. \u89C6\u9891\u5904\u7406",depth:2},{id:"81-\u89C6\u9891\u8F6C\u7801",text:"8.1 \u89C6\u9891\u8F6C\u7801",depth:3},{id:"82-\u62BD\u53D6\u89C6\u9891\u6D41",text:"8.2 \u62BD\u53D6\u89C6\u9891\u6D41",depth:3},{id:"82-\u89C6\u9891\u538B\u7F29",text:"8.2 \u89C6\u9891\u538B\u7F29",depth:3},{id:"82-\u89C6\u9891\u901F\u7387\u8C03\u6574",text:"8.2 \u89C6\u9891\u901F\u7387\u8C03\u6574",depth:3},{id:"83-\u89C6\u9891\u88C1\u526A",text:"8.3 \u89C6\u9891\u88C1\u526A",depth:3},{id:"84-\u89C6\u9891\u7FFB\u8F6C",text:"8.4 \u89C6\u9891\u7FFB\u8F6C",depth:3},{id:"85-\u89C6\u9891\u622A\u56FE",text:"8.5 \u89C6\u9891\u622A\u56FE",depth:3},{id:"86-\u53BB\u9664\u6C34\u5370",text:"8.6 \u53BB\u9664\u6C34\u5370",depth:3},{id:"87-\u6DFB\u52A0\u6C34\u5370",text:"8.7 \u6DFB\u52A0\u6C34\u5370",depth:3},{id:"88-\u6DFB\u52A0\u5B57\u5E55",text:"8.8 \u6DFB\u52A0\u5B57\u5E55",depth:3},{id:"89-\u6DFB\u52A0thumbnail\u6587\u4EF6\u7BA1\u7406\u65F6\u770B\u5230\u7684\u5C01\u9762",text:"8.9 \u6DFB\u52A0thumbnail\uFF0C\u6587\u4EF6\u7BA1\u7406\u65F6\u770B\u5230\u7684\u5C01\u9762",depth:3},{id:"",text:"",depth:2},{id:"9-\u4E0B\u8F7D\u547D\u4EE4",text:"9. \u4E0B\u8F7D\u547D\u4EE4",depth:2},{id:"\u53C2\u6570\u8BF4\u660E-10",text:"\u53C2\u6570\u8BF4\u660E",depth:4}],title:"",frontmatter:{layout:"post",title:"ffmpeg \u662F\u4E00\u4E2A\u547D\u4EE4\u884C\u97F3\u89C6\u9891\u540E\u671F\u5904\u7406\u8F6F\u4EF6",date:"2024-02-24T16:30:00.000Z",categories:["\u97F3\u89C6\u9891"],tags:["ffmpeg","ffplay"]}}}}]);